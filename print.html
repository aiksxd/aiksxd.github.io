<!DOCTYPE HTML>
<html lang="en" class="navy" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>AX Blogs</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('navy')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="P2P-Live-WebCN.html"><strong aria-hidden="true">1.</strong> P2P简单直播(可互动，基于PeerJS)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="P2P-Live-WebCN.html"><strong aria-hidden="true">1.1.</strong> P2P实现直播网站</a></li><li class="chapter-item expanded "><a href="P2P-Live-WebEN.html"><strong aria-hidden="true">1.2.</strong> P2P-Live-Web-EN</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="PCPEServerMutliplayGuide.html"><strong aria-hidden="true">2.</strong> PCPE双端开服建站联机教程</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="PCPEMutliplayP1.html"><strong aria-hidden="true">2.1.</strong> 移动端开服Android & IOS</a></li><li class="chapter-item expanded "><a href="PCPEMutliplayP2.html"><strong aria-hidden="true">2.2.</strong> 内网穿透实现</a></li><li class="chapter-item expanded "><a href="PCPEMutliplayP3.html"><strong aria-hidden="true">2.3.</strong> 异地组网实现</a></li><li class="chapter-item expanded "><a href="PCPEMutliplayP4.html"><strong aria-hidden="true">2.4.</strong> 远程协助实现</a></li><li class="chapter-item expanded "><a href="PCPEMutliplayP3.html"><strong aria-hidden="true">2.5.</strong> 链接汇总 & 总结</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="NatBuildLiveWeb.html"><strong aria-hidden="true">3.</strong> 网穿透实现直播网站</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="NatLiveP1.html"><strong aria-hidden="true">3.1.</strong> 准备工作</a></li><li class="chapter-item expanded "><a href="NatLiveP2.html"><strong aria-hidden="true">3.2.</strong> 过程与拓展</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="RustBevyOnTermux.html"><strong aria-hidden="true">4.</strong> Rust安装bevy于Termux</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AX Blogs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="p2p-live-web"><a class="header" href="#p2p-live-web">P2P-Live-Web</a></h1>
<p>注：所有消息2~3周回复一次</p>
<h2 id="单直播间型"><a class="header" href="#单直播间型"><a href="https://aiksxd.github.io/P2PLiveWebCN.html">单直播间型</a></a></h2>
<h3 id="用法"><a class="header" href="#用法">用法:</a></h3>
<ol>
<li>将文件在<strong>本地读取</strong>或<strong>直接访问</strong>以下网址等</li>
<li>直播方点击<strong>共享本地流</strong>按钮，并且分享自己的ID给观众</li>
<li>观众与主播的id任意相连，不过需要保持中间不断开，如果中间断开则需更换连接对象</li>
</ol>
<h2 id="eg多房间型url-root"><a class="header" href="#eg多房间型url-root"><a href="https://aiksxd.github.io/e.g.P2PRootMonitorCN.html">e.g.多房间型(URL-&gt;ROOT)</a></a></h2>
<ul>
<li>改版示例：</li>
<li>e.g.P2PLiveindex.html 为网站主页（用于展示准备发起直播的房间，并为之提供入口）</li>
<li>e.g.P2PRootMonitor.html 为网站根节点（根节点为监听器，负责获取发起直播的所有ID，并递交给主页）</li>
<li>e.g.P2PLiveHost &amp; Guest.html 为附属页面，置于同目录下即可</li>
</ul>
<h3 id="用法-1"><a class="header" href="#用法-1">用法：</a></h3>
<ol>
<li>访问主页(根节点页面有超链接)，<strong>填入根节点的ID</strong>并按下<strong>连接</strong>按钮</li>
<li>直播方点击<strong>去开播</strong>之后点击<strong>共享本地流</strong></li>
<li>观众在执行第一步后可以看到该根节点下的所有活跃直播间(列入标准不在于是否推流，而是直播页面的连接情况)</li>
</ol>
<h3 id="拓展"><a class="header" href="#拓展">拓展：</a></h3>
<ol>
<li>如<strong>多房间型</strong>在<strong>自己设备开个根节点</strong>，web网站部署<strong>剩余页面</strong>，并且<strong>指定根节点连接</strong>，就实现了一个简单的直播网站</li>
<li>如<strong>单直播间型</strong>同样<strong>自己开个页面</strong>，<strong>得到ID后推流</strong>，web网页部署另一个页面，<strong>指定ID连接</strong>，就实现指定直播间</li>
<li>如增加房间列表的样式，可以增加直播间页面(e.g.P2PLiveHost)中<code>guest.on('data', (data) =&gt; {</code>中<code>guest.send([peer.id, null, null, 0, 1]);</code>中的参数，并在首页节点页面对接，<strong>注意：第索引为4的第五个值默认用于区分访客与主播的信息来源</strong></li>
<li>优化连接方法，自行解析<strong>nodesMap数组</strong>(包含所有节点信息)(注：<strong>e.g.版本未测试</strong>，<strong>主播节点</strong>的nodesMap包含<strong>所有嵌套节点信息</strong>，而<strong>根节点nodeMaps</strong>=hostsPeers(<strong>不含子子节点</strong>)，如果不喜欢现有的nodesMap数组收集节点信息建议<strong>重构recorder()方法</strong>)，根据主播设备配置推荐采用<strong>围绕主播多个二叉树式</strong>连接法</li>
</ol>
<h2 id="注意事项"><a class="header" href="#注意事项"><strong>注意事项</strong>：</a></h2>
<ol>
<li><strong>根节点</strong>具有<strong>推流最高优先级</strong>，它会覆盖所有子节点及其子子节点等的直播</li>
<li><strong>直播媒体流只会推送到子节点</strong>，而不像信息通道无论在哪个节点都可以收到信息，故所连接的根节点最好是直播节点或监听器的子节点（即<strong>流媒体单向传递，文本双向传递</strong>）</li>
<li>如果建立连接发生在主机开始共享流媒体之前，再次点击Connect按钮会<strong>刷新接收的流媒体</strong></li>
<li>该文件是发与<strong>接收结合为一体</strong>的，且仅依靠前端，这意味着任何人的权限是对等的，如果投入开发或不安全环境，需要对内容进行封装并设置权限分类</li>
<li>在主播丢失连接时，则无法将主播子节点的信息传递给其他主播子节点</li>
<li>子节点在递交给子子节点时视频质量开始可能模糊，尝试等待即可(一次测试26s后画质同步)</li>
</ol>
<h3 id="适配与流源拓宽"><a class="header" href="#适配与流源拓宽">适配与流源拓宽</a></h3>
<p>桌面流默认由MediaDevices.getDisplayMedia()获取，即仅共享桌面，且意味着<strong>大多移动端</strong>都无法发起直播而<strong>只能接收媒体流和文本信息</strong>，且需要在本地开发环境或https下才能正常工作。
如果需要手机端屏幕推流、获取摄像头、相机拍照等等，可参考getUserMedia()API，并修改页面的getLocalStream()</p>
<h2 id="对于p2p-live-web"><a class="header" href="#对于p2p-live-web">对于<strong>P2P-Live-web</strong></a></h2>
<p>它采用<strong>节点式传递</strong>，允许数据直接从一个节点传递到另一个节点，这意味着无论连接谁，都可以收到相同的文字互动信息，而且<strong>无需依赖中央服务器</strong>，大大减少网络延迟。</p>
<p><img src="https://github.com/aiksxd/material/blob/main/img/DeliverGIF.gif" alt="DeliverGIF" /></p>
<h2 id="对于exchange"><a class="header" href="#对于exchange">对于<strong>exchange</strong></a></h2>
<p><strong>仅用于两端</strong>相互交换流媒体而非传递，要求连接方和接收方都提交流媒体，如果增加第三者，其中一个人的流媒体会被<strong>覆盖</strong></p>
<ul>
<li><a href="https://aiksxd.github.io/e.g.exchange.html">e.g.Exchange</a></li>
</ul>
<h2 id="issue"><a class="header" href="#issue">Issue:</a></h2>
<h3 id="连接无反馈"><a class="header" href="#连接无反馈">连接无反馈</a></h3>
<ul>
<li>由于P2P本身的局限性，有些网络之间难以建立P2P连接，不过可以通过桥接都可以连接网络来解决</li>
<li>关于获取所有节点连接状况：尽管节点网络数据发送已经做完了，但是由于本人能力有限，还没有写好解析数组的函数
但你仍然可以在任意节点的<strong>浏览器内置的控制台</strong>抓取<strong>nodesMap</strong>数组，其中包含从根节点到子节点的所有连接id与关系，其结构为：
<code>[thisID, [childsIDs], null, 1]</code></li>
<li><strong>thisID</strong>首个为<strong>根节点</strong></li>
<li><strong>childsIDs</strong>首个为根节点的<strong>子节点（若子节点无子节点则为id值，若有则为格式相同的嵌套数组）</strong></li>
<li>null用于区分信息通道</li>
<li>1表示该网络信息来源为根节点(每当新节点加入都会沿线路传输到根节点，根节点汇总后发布再传递至各个节点，汇总过程中该值为0)</li>
</ul>
<h2 id="其他"><a class="header" href="#其他">其他</a></h2>
<ul>
<li><strong>关于P2P</strong>：
P2P 是一种分布式网络架构，其中每个参与者（也称为节点）充当客户端和服务器的角色。
与传统的客户端-服务器模型不同，P2P 允许直接的节点之间通信，而无需通过中央服务器进行转发。</li>
</ul>
<p><img src="https://github.com/aiksxd/material/blob/main/img/P2PGIF.gif" alt="P2PGIF" /></p>
<ul>
<li><strong>关于PeerJS</strong>：
PeerJS：PeerJS 是一个基于 WebRTC 的 JavaScript 库，用于简化 P2P 通信的实现。</li>
</ul>
<p>简化的 API：PeerJS 提供了简单易用的 API，使开发者能够快速实现 P2P 连接和数据传输。
它抽象了复杂的 WebRTC 细节，使开发过程更加简便。
&gt;</p>
<h2 id="关于本地peer服务器"><a class="header" href="#关于本地peer服务器"><strong>关于本地Peer服务器</strong>：</a></h2>
<p><strong>PS(ignore it if you don't run peerjs server locally如果不想本地运行自行忽略):</strong></p>
<h3 id="peerserver"><a class="header" href="#peerserver">PeerServer</a></h3>
<p>先装npm，国内cnpm也可以，然后安装peer：</p>
<pre><code>npm install peer -g
</code></pre>
<p>其中-g可选，表示全局安装，安装至用户文件夹，否则当前目录 
然后用下面命令可以启用本地peer服务器(路径等值需要与网页内peerjs统一)</p>
<pre><code>peerjs --port 9000 --key peerjs --path /myapp Started PeerServer on ::, port: 9000, path: /myapp
</code></pre>
<h3 id="修改js引用路径"><a class="header" href="#修改js引用路径">修改JS引用路径</a></h3>
<p>在head标签中引用远程js路径改为本地的js路径，示例如下</p>
<pre><code>&lt;script src=&quot;js/peerjs.min.js&quot;&gt;&lt;/script&gt;

&lt;!--script src=&quot;https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js&quot;&gt;&lt;/script--&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="p2p-live-web-1"><a class="header" href="#p2p-live-web-1">P2P-Live-Web</a></h1>
<p>注：所有消息2~3周回复一次</p>
<h2 id="单直播间型-1"><a class="header" href="#单直播间型-1"><a href="https://aiksxd.github.io/P2PLiveWebCN.html">单直播间型</a></a></h2>
<h3 id="用法-2"><a class="header" href="#用法-2">用法:</a></h3>
<ol>
<li>将文件在<strong>本地读取</strong>或<strong>直接访问</strong>以下网址等</li>
<li>直播方点击<strong>共享本地流</strong>按钮，并且分享自己的ID给观众</li>
<li>观众与主播的id任意相连，不过需要保持中间不断开，如果中间断开则需更换连接对象</li>
</ol>
<h2 id="eg多房间型url-root-1"><a class="header" href="#eg多房间型url-root-1"><a href="https://aiksxd.github.io/e.g.P2PRootMonitorCN.html">e.g.多房间型(URL-&gt;ROOT)</a></a></h2>
<ul>
<li>改版示例：</li>
<li>e.g.P2PLiveindex.html 为网站主页（用于展示准备发起直播的房间，并为之提供入口）</li>
<li>e.g.P2PRootMonitor.html 为网站根节点（根节点为监听器，负责获取发起直播的所有ID，并递交给主页）</li>
<li>e.g.P2PLiveHost &amp; Guest.html 为附属页面，置于同目录下即可</li>
</ul>
<h3 id="用法-3"><a class="header" href="#用法-3">用法：</a></h3>
<ol>
<li>访问主页(根节点页面有超链接)，<strong>填入根节点的ID</strong>并按下<strong>连接</strong>按钮</li>
<li>直播方点击<strong>去开播</strong>之后点击<strong>共享本地流</strong></li>
<li>观众在执行第一步后可以看到该根节点下的所有活跃直播间(列入标准不在于是否推流，而是直播页面的连接情况)</li>
</ol>
<h3 id="拓展-1"><a class="header" href="#拓展-1">拓展：</a></h3>
<ol>
<li>如<strong>多房间型</strong>在<strong>自己设备开个根节点</strong>，web网站部署<strong>剩余页面</strong>，并且<strong>指定根节点连接</strong>，就实现了一个简单的直播网站</li>
<li>如<strong>单直播间型</strong>同样<strong>自己开个页面</strong>，<strong>得到ID后推流</strong>，web网页部署另一个页面，<strong>指定ID连接</strong>，就实现指定直播间</li>
<li>如增加房间列表的样式，可以增加直播间页面(e.g.P2PLiveHost)中<code>guest.on('data', (data) =&gt; {</code>中<code>guest.send([peer.id, null, null, 0, 1]);</code>中的参数，并在首页节点页面对接，<strong>注意：第索引为4的第五个值默认用于区分访客与主播的信息来源</strong></li>
<li>优化连接方法，自行解析<strong>nodesMap数组</strong>(包含所有节点信息)(注：<strong>e.g.版本未测试</strong>，<strong>主播节点</strong>的nodesMap包含<strong>所有嵌套节点信息</strong>，而<strong>根节点nodeMaps</strong>=hostsPeers(<strong>不含子子节点</strong>)，如果不喜欢现有的nodesMap数组收集节点信息建议<strong>重构recorder()方法</strong>)，根据主播设备配置推荐采用<strong>围绕主播多个二叉树式</strong>连接法</li>
</ol>
<h2 id="注意事项-1"><a class="header" href="#注意事项-1"><strong>注意事项</strong>：</a></h2>
<ol>
<li><strong>根节点</strong>具有<strong>推流最高优先级</strong>，它会覆盖所有子节点及其子子节点等的直播</li>
<li><strong>直播媒体流只会推送到子节点</strong>，而不像信息通道无论在哪个节点都可以收到信息，故所连接的根节点最好是直播节点或监听器的子节点（即<strong>流媒体单向传递，文本双向传递</strong>）</li>
<li>如果建立连接发生在主机开始共享流媒体之前，再次点击Connect按钮会<strong>刷新接收的流媒体</strong></li>
<li>该文件是发与<strong>接收结合为一体</strong>的，且仅依靠前端，这意味着任何人的权限是对等的，如果投入开发或不安全环境，需要对内容进行封装并设置权限分类</li>
<li>在主播丢失连接时，则无法将主播子节点的信息传递给其他主播子节点</li>
<li>子节点在递交给子子节点时视频质量开始可能模糊，尝试等待即可(一次测试26s后画质同步)</li>
</ol>
<h3 id="适配与流源拓宽-1"><a class="header" href="#适配与流源拓宽-1">适配与流源拓宽</a></h3>
<p>桌面流默认由MediaDevices.getDisplayMedia()获取，即仅共享桌面，且意味着<strong>大多移动端</strong>都无法发起直播而<strong>只能接收媒体流和文本信息</strong>，且需要在本地开发环境或https下才能正常工作。
如果需要手机端屏幕推流、获取摄像头、相机拍照等等，可参考getUserMedia()API，并修改页面的getLocalStream()</p>
<h2 id="对于p2p-live-web-1"><a class="header" href="#对于p2p-live-web-1">对于<strong>P2P-Live-web</strong></a></h2>
<p>它采用<strong>节点式传递</strong>，允许数据直接从一个节点传递到另一个节点，这意味着无论连接谁，都可以收到相同的文字互动信息，而且<strong>无需依赖中央服务器</strong>，大大减少网络延迟。</p>
<p><img src="https://github.com/aiksxd/material/blob/main/img/DeliverGIF.gif" alt="DeliverGIF" /></p>
<h2 id="对于exchange-1"><a class="header" href="#对于exchange-1">对于<strong>exchange</strong></a></h2>
<p><strong>仅用于两端</strong>相互交换流媒体而非传递，要求连接方和接收方都提交流媒体，如果增加第三者，其中一个人的流媒体会被<strong>覆盖</strong></p>
<ul>
<li><a href="https://aiksxd.github.io/e.g.exchange.html">e.g.Exchange</a></li>
</ul>
<h2 id="issue-1"><a class="header" href="#issue-1">Issue:</a></h2>
<h3 id="连接无反馈-1"><a class="header" href="#连接无反馈-1">连接无反馈</a></h3>
<ul>
<li>由于P2P本身的局限性，有些网络之间难以建立P2P连接，不过可以通过桥接都可以连接网络来解决</li>
<li>关于获取所有节点连接状况：尽管节点网络数据发送已经做完了，但是由于本人能力有限，还没有写好解析数组的函数
但你仍然可以在任意节点的<strong>浏览器内置的控制台</strong>抓取<strong>nodesMap</strong>数组，其中包含从根节点到子节点的所有连接id与关系，其结构为：
<code>[thisID, [childsIDs], null, 1]</code></li>
<li><strong>thisID</strong>首个为<strong>根节点</strong></li>
<li><strong>childsIDs</strong>首个为根节点的<strong>子节点（若子节点无子节点则为id值，若有则为格式相同的嵌套数组）</strong></li>
<li>null用于区分信息通道</li>
<li>1表示该网络信息来源为根节点(每当新节点加入都会沿线路传输到根节点，根节点汇总后发布再传递至各个节点，汇总过程中该值为0)</li>
</ul>
<h2 id="其他-1"><a class="header" href="#其他-1">其他</a></h2>
<ul>
<li><strong>关于P2P</strong>：
P2P 是一种分布式网络架构，其中每个参与者（也称为节点）充当客户端和服务器的角色。
与传统的客户端-服务器模型不同，P2P 允许直接的节点之间通信，而无需通过中央服务器进行转发。</li>
</ul>
<p><img src="https://github.com/aiksxd/material/blob/main/img/P2PGIF.gif" alt="P2PGIF" /></p>
<ul>
<li><strong>关于PeerJS</strong>：
PeerJS：PeerJS 是一个基于 WebRTC 的 JavaScript 库，用于简化 P2P 通信的实现。</li>
</ul>
<p>简化的 API：PeerJS 提供了简单易用的 API，使开发者能够快速实现 P2P 连接和数据传输。
它抽象了复杂的 WebRTC 细节，使开发过程更加简便。
&gt;</p>
<h2 id="关于本地peer服务器-1"><a class="header" href="#关于本地peer服务器-1"><strong>关于本地Peer服务器</strong>：</a></h2>
<p><strong>PS(ignore it if you don't run peerjs server locally如果不想本地运行自行忽略):</strong></p>
<h3 id="peerserver-1"><a class="header" href="#peerserver-1">PeerServer</a></h3>
<p>先装npm，国内cnpm也可以，然后安装peer：</p>
<pre><code>npm install peer -g
</code></pre>
<p>其中-g可选，表示全局安装，安装至用户文件夹，否则当前目录 
然后用下面命令可以启用本地peer服务器(路径等值需要与网页内peerjs统一)</p>
<pre><code>peerjs --port 9000 --key peerjs --path /myapp Started PeerServer on ::, port: 9000, path: /myapp
</code></pre>
<h3 id="修改js引用路径-1"><a class="header" href="#修改js引用路径-1">修改JS引用路径</a></h3>
<p>在head标签中引用远程js路径改为本地的js路径，示例如下</p>
<pre><code>&lt;script src=&quot;js/peerjs.min.js&quot;&gt;&lt;/script&gt;

&lt;!--script src=&quot;https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js&quot;&gt;&lt;/script--&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="p2p-live-web-2"><a class="header" href="#p2p-live-web-2">P2P-Live-Web</a></h1>
<p>PS: All messages will be replied to once every 2 to 3 weeks.</p>
<h2 id="single-room-type-live-streaming"><a class="header" href="#single-room-type-live-streaming"><a href="https://aiksxd.github.io/P2PLiveWeb.html">Single Room Type Live Streaming</a></a></h2>
<h3 id="instructions"><a class="header" href="#instructions">Instructions:</a></h3>
<ol>
<li>Load the file <strong>locally</strong> or <strong>access directly</strong> via the following links, e.g..</li>
<li>The broadcaster clicks the <strong>Start Local Stream</strong> button and shares their ID with the audience.</li>
<li>The audience can connect to any broadcaster's ID, but the connection must remain uninterrupted. If the connection is broken in the middle, a new connection object is required.</li>
</ol>
<h2 id="multi-room-type-url-root"><a class="header" href="#multi-room-type-url-root"><a href="https://aiksxd.github.io/e.g.P2PRootMonitor.html">Multi-Room Type (URL-&gt;ROOT)</a></a></h2>
<ul>
<li>Version Modified Example:</li>
<li>e.g.P2PLiveindex.html serves as the website homepage (displaying rooms ready for live streaming and providing entry points)</li>
<li>e.g.P2PRootMonitor.html acts as the website's root node (responsible for monitoring and providing all IDs of live stream initiators to the homepage)</li>
<li>e.g.P2PLiveHost &amp; Guest.html are auxiliary pages placed in the same directory</li>
</ul>
<h3 id="instructions-1"><a class="header" href="#instructions-1">Instructions:</a></h3>
<ol>
<li>Visit the homepage (the root node page contains hyperlinks), enter the <strong>root node's ID</strong>, and click the <strong>Connect</strong> button</li>
<li>The broadcaster clicks <strong>Go To Live</strong> and then <strong>Share Local Stream</strong></li>
<li>After completing step one, audience members can view all active live streaming rooms under the root node (based on the connectivity status of the live streaming pages)</li>
</ol>
<h3 id="extensions"><a class="header" href="#extensions">Extensions:</a></h3>
<ol>
<li>For the multi-room type, by creating a root node on your own device, deploying the remaining pages on the web site, and specifying the root node connection, you can implement a simple live streaming website.</li>
<li>For the single live room type, similarly, create a page on your own, start streaming after obtaining the ID, deploy another page on the web, and specify the ID connection to achieve a specific live room.</li>
<li>To customize the room list style, modify the parameters in the <code>guest.on('data', (data) =&gt; {</code> section of the live streaming page (e.g.P2PLiveHost). <strong>Note: Do not modify the fifth parameter at index 4!</strong></li>
<li>Optimize the connection method by parsing the <strong>nodesMap array</strong> (containing all node information) yourself (Note: <strong>e.g. version not tested</strong>). The nodesMap of the broadcaster node contains all nested node information, while the <strong>root node nodeMaps</strong> = hostsPeers (excluding sub-child nodes). If you are not satisfied with the current nodesMap array collecting node information, consider <strong>restructuring the recorder() method</strong>. Depending on the broadcaster's device configuration, it is recommended to use a <strong>multi-binary tree-style</strong> connection method.</li>
</ol>
<h2 id="considerations"><a class="header" href="#considerations"><strong>Considerations</strong>:</a></h2>
<ol>
<li>The <strong>root node</strong> has the <strong>highest priority for streaming</strong>, overriding all child nodes and their subsequent children's live streams.</li>
<li><strong>Live media streams are only pushed to child nodes</strong>, unlike the information channel where messages can be received from any node. Therefore, it is advisable for the connected root node to be a live streaming node or monitor (<strong>unidirectional media streaming, bidirectional text messaging</strong>).</li>
<li>If the connection is established before the host starts sharing the media stream, clicking the Connect button again will <strong>refresh the received media stream</strong>.</li>
<li>This file combines <strong>sender and receiver into one</strong>, relying solely on the frontend. This means that everyone's permissions are equal. If deployed in a development or insecure environment, content should be encapsulated and permission levels set.</li>
<li>In the event of the host losing connection, the information from the host's child nodes will not be transmitted to other host's child nodes.</li>
<li>Video quality may initially be blurry when passed from child nodes to sub-child nodes; waiting for synchronization may resolve this (quality synchronization observed after 26 seconds in a test).</li>
</ol>
<h3 id="adapting-and-expanding-streaming-sources"><a class="header" href="#adapting-and-expanding-streaming-sources">Adapting and Expanding Streaming Sources</a></h3>
<ul>
<li>The desktop stream is obtained by default using MediaDevices.getDisplayMedia(), which means that it only shares the desktop. This also implies that <strong>most mobile devices</strong> are unable to initiate live streams and can <strong>only receive media streams and text information</strong>. Additionally, this functionality requires operation in a local development environment or under HTTPS to function properly.</li>
<li>If there is a need for mobile screen streaming, accessing the camera, taking photos, etc., you can refer to the getUserMedia() API and modify the page's getLocalStream() function.</li>
</ul>
<h3 id="for-p2p-live-web"><a class="header" href="#for-p2p-live-web">For <strong>P2P-Live-web</strong></a></h3>
<p>it employs a <strong>node-based delivery</strong> that allows data to be passed directly from one node to another, enabling the same text interaction message to be received by anyone connected without relying on a central server, thus significantly reducing network latency.</p>
<p><img src="https://github.com/aiksxd/material/blob/main/img/DeliverGIF.gif" alt="DeliverGIF" /></p>
<h3 id="regarding-exchange"><a class="header" href="#regarding-exchange">Regarding <strong>exchange</strong></a></h3>
<p>it is <strong>only used for bilateral</strong> exchange of media streams rather than transmission. Both the connecting and receiving parties need to submit media streams. If a third party is added, one person's media stream will be <strong>overwritten</strong>.</p>
<ul>
<li><a href="https://aiksxd.github.io/e.g.exchange.html">e.g.Exchange</a></li>
</ul>
<h2 id="issue-2"><a class="header" href="#issue-2">Issue:</a></h2>
<h3 id="connect-without-feedbackfailed"><a class="header" href="#connect-without-feedbackfailed">Connect without feedback(failed):</a></h3>
<p>Due to the inherent limitations of P2P,establishing connections between some networks can be challenging, but this can be resolved by bridging networks.</p>
<h3 id="regarding-obtaining-the-connection-status-of-all-nodes"><a class="header" href="#regarding-obtaining-the-connection-status-of-all-nodes">Regarding obtaining the connection status of all nodes:</a></h3>
<p>Although the data transmission between nodes has been completed, due to my limited abilities, the function to parse the array has not been implemented yet.
However, you can still capture the <strong>nodesMap</strong> array in the <strong>built-in console of any node's browser</strong>, which contains all connection IDs and relationships from the root node to child nodes. Its structure is as follows:
<code>[thisID, [childsIDs], null, 1]</code></p>
<ul>
<li><strong>thisID</strong> which first of it is the <strong>root node</strong>.</li>
<li><strong>childsIDs</strong> which first of them are the <strong>child nodes of the root node (if a child node has no children, it is the ID value; if it has children, it is a nested array with the same format)</strong>.</li>
<li>null is used to distinguish the information channel.</li>
<li>1 indicates that the network information originates from the root node (each time a new node joins, it is transmitted along the line to the root node, which then consolidates and distributes it to various nodes; during the consolidation process, this value is 0).</li>
</ul>
<h2 id="about-local-peer-server"><a class="header" href="#about-local-peer-server"><strong>About Local Peer Server</strong>:</a></h2>
<p>(<strong>ignore it if you don't run peerjs server locally</strong>):</p>
<h3 id="peerserver-2"><a class="header" href="#peerserver-2">PeerServer</a></h3>
<p>Need to install nodejs at first, and then use its npm to install peer</p>
<pre><code>npm install peer -g
</code></pre>
<p>-g is selective if you only want to use in a folder
local peer server run command(value of path need to be united on web &amp; terminal):</p>
<pre><code> peerjs --port 9000 --key peerjs --path /myapp Started PeerServer on ::, port: 9000, path: /myapp
</code></pre>
<h3 id="modify-js-path"><a class="header" href="#modify-js-path">Modify JS path</a></h3>
<p>Modify path of remote peerjs.min.js to local path of js in headP (example)</p>
<pre><code>&lt;script src=&quot;js/peerjs.min.js&quot;&gt;&lt;/script&gt;

&lt;!--script src=&quot;https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js&quot;&gt;&lt;/script--&gt;
</code></pre>
<h2 id="others"><a class="header" href="#others">Others</a></h2>
<ul>
<li><strong>About P2P</strong>:</li>
</ul>
<blockquote>
<p>P2P is a distributed network architecture where each participant (also known as a node) acts as both a client and a server.
Unlike the traditional client-server model, P2P allows direct communication between nodes without the need for relay through a central server.</p>
</blockquote>
<p><img src="https://github.com/aiksxd/material/blob/main/img/P2PGIF.gif" alt="P2PGIF" /></p>
<ul>
<li><strong>About PeerJS</strong>:</li>
</ul>
<blockquote>
<p>PeerJS: PeerJS is a JavaScript library based on WebRTC for simplifying P2P communication implementation.</p>
<p>Simplified API: PeerJS provides a simple and easy-to-use API that allows developers to quickly establish P2P connections and transfer data.
It abstracts the complex WebRTC details, making the development process more convenient.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li>Date: 2023-06-29</li>
<li>Modified: 2024-01-23</li>
</ul>
<h2 id="前言"><a class="header" href="#前言"><strong>前言</strong></a></h2>
<ul>
<li>建议配合<strong>视频教程</strong>和<strong>左侧目录</strong>食用，<strong>电脑读者请通过目录跳过Android&amp;Termux的相关教程</strong>），这是一篇面向新萌的教程，提供我已知的最优解，但<strong>不一定是最好</strong>；完成一个服务器需要<strong>一台满足配置要求(因目标而定)的设备</strong>，能够<strong>正常运行的</strong>对应程序的<strong>服务器端</strong>（程序自带或给常见链接自行下载），一个能够使用且支持对应协议的内网穿透工具或者联机工具(后面会列出，自选即可)和一颗能够坚持学下去的恒心（学会了还是蛮简单的）</li>
<li>注：不同应用通信需要选择合适等方法、协议、端口(下文有判断方法)</li>
<li>应用联机主要包含三大方式（网站大都采用第一种，游戏通常是第二、三种局域网）：</li>
<li><strong>！PS：本教程是部署第一种实现方法或将第二、三种实现方法转为第一种并部署以此打破空间限制！</strong>
<ul>
<li><em><strong>中间服务器实现</strong>（服务器托管或内网穿透等）：通过内网连接公网，处于公网中的服务器中转分发主机的数据实现联机。<strong>优点</strong>：可以打破空间限制，将处于世界各地的人汇合组建一个小网络，并且通常服务器有更丰富的配置文件提供，启动更快，配置更灵活方便；<strong>缺点</strong>：学习成本相对较高，较长的信息传输线路导致延迟相对较高。</em></li>
<li><em><strong>局域网下实现</strong>：通过设备连接路由器，由路由器中转分发主机的数据实现一个内网中设备之间的信息交换。<strong>优点</strong>：速度快，简单没有学习压力；<strong>缺点</strong>：受到空间限制，必须在同一个网络下才能进行信息交换</em></li>
<li><em><strong>通过预设本地的多人操作位置实现</strong>（多见于游戏）：通过程序预先设置好的位置，允许多个人共用一台设备进行不同位置间的信息共享。<strong>优点</strong>：几乎没有信息传输间的延迟，更加稳定，几乎为零的学习成本，且大大节约了应用的开发成本，在代码上更容易实现；<strong>缺点</strong>：严格的空间限制，所有人必须共用一台设备，而且位置受硬件规格限制，需要外接设备（如手柄）。</em></li>
</ul>
</li>
</ul>
<h2 id="手机搭建终端环境内网穿透开服pc电脑端跳过"><a class="header" href="#手机搭建终端环境内网穿透开服pc电脑端跳过"><strong>手机搭建终端环境(内网穿透开服;PC电脑端跳过)</strong></a></h2>
<ul>
<li>这是专门为<strong>安卓</strong>手机提供的<strong>开服</strong>方法（<strong>IOS苹果手机</strong>需要先<strong>越狱</strong>然后使用<strong>NewTerm</strong>，虽同样都是终端命令，<strong>但我暂无条件更新相关教程</strong>），主要服务于<strong>内网穿透</strong>，或是异地组网和远程控制(安卓系统本身有软件提供异地组网和远程控制，frpc有内网穿透但是直接运行服务器端不方便，如果你不是为了开服建议使用<strong>原生安卓应用</strong>，除非特殊需要)如内网穿透<a href="https://github.com/mainfunx/frpc_android">frpc on github</a>，<a href="https://gitee.com/skyuning/frpc-Android">frpc on gitee</a>，<strong>pc端请忽略该部分</strong></li>
<li><em>注：本教程内所有安装过程的选择直接回车默认即可</em></li>
</ul>
<blockquote>
<ul>
<li>安装termux</li>
</ul>
<blockquote>
<p>下载地址(github如若打不开，在地址github之前加字母k或https://ghproxy.com/，即https://kgithub...或https://ghproxy.com/https://github...)：</p>
<ul>
<li><a href="https://github.com/termux/termux-app/wiki/Termux-on-android-5-or-6">github安卓6及以下版本</a></li>
<li><a href="https://www.123pan.com/s/Rx6cVv-BYhxd.html">国内云盘直链0.118</a>
<em>注：安卓6及其以下版本建议<strong>不要换源</strong>，请安装完系统后，在系统内换源</em></li>
<li><a href="https://github.com/termux">github安卓7及以上版本</a></li>
<li><a href="">F-Droid的termux网页页面</a></li>
</ul>
</blockquote>
<ul>
<li>Termux基础配置(最左下按钮为tab自动补全)</li>
</ul>
<blockquote>
<ul>
<li><em><strong>换源</strong>命令(安卓7+版本)：</em></li>
</ul>
<pre><code class="language-bash">termux-change-repo
</code></pre>
<p>直接<strong>回车(Enter)<strong>下一步后</strong>空格</strong>选择下方国内源后<strong>一路回车即可</strong>（安卓6及其以下不建议换源，如需则自行查找低版本换源命令）</p>
<ul>
<li>更新包管理工具</li>
</ul>
<pre><code class="language-bash">pkg upgrade &amp;&amp; pkg update
apt upgrade &amp;&amp; apt update
</code></pre>
<ul>
<li>获取手机内部储存</li>
</ul>
<pre><code class="language-bash">termux-setup-storage
</code></pre>
<p>注：Termux的文件都存在手机根目录，没有root无法访问，这些只能通过termux进行读写，使用此命令后，可在home目录下生成一个通往手机主目录的软链接。</p>
</blockquote>
<ul>
<li>基本命令
&gt;```bash</li>
</ul>
<blockquote>
<p>cd 目录 #进入当前目录下的指定目录,其中../为上级，cd ~中~表示当前操作用户目录。
rm -r 目录/文件 #递归删除，参数-r为递归，没有不能删目录
ls -a #列出当前目录下文件，-a参数显示隐藏文件
l #单l命令比ls更加便捷清晰(旧版termux没有，不过安装的系统内可使用)
pwd #获取当前目录地址
mkdir 文件夹名 #在当前目录下新建文件夹（目录）
Ctrl + C #键盘快捷键强制中断当前程序/废弃当前键入命令
#右滑可创建新会话(窗口)|唤起键盘
####解压工具####
apt install unzip #安装
unzip 目标文件名.zip -d 释放目标目录（如无自动创建）</p>
<pre><code></code></pre>
</blockquote>
</blockquote>
<h3 id="安装linux系统"><a class="header" href="#安装linux系统">安装Linux系统</a></h3>
<p>也可以不装，不过有些应用依赖无法启用(如dotnet)，可能回导致应用无法启动，这时就需要安装系统(proot/chroot)，否则可以直接使用启动命令</p>
<h4 id="android5以上通用方法简单内存充足时推荐"><a class="header" href="#android5以上通用方法简单内存充足时推荐">Android5以上通用方法（简单，内存充足时推荐）</a></h4>
<blockquote>
<p>+为什么建议该方法：
&gt;+ kali nethunter方法安装termux的linux系统，使用的包都可以支持最新版，不过这也导致了一些不兼容问题
&gt;+ 并且该方法操作简单，无需多余步骤
&gt;+ 缺点在于镜像只有完整版且占用内存较大（约11G），如果内存不足可用下面其他方法占用约1G+</p>
<ul>
<li>Kali版本</li>
</ul>
<blockquote>
<ul>
<li>官方版本（需网络环境，没有则用镜像版）</li>
</ul>
<pre><code class="language-bash">pkg install git wget
wget -O install-nethunter-termux https://offs.ec/2MceZWr #–no-check-certificate
chmod +x install-nethunter-termux
./install-nethunter-termux
</code></pre>
<ul>
<li>使用wget下载时使用-c参数可防止意外中断，对于github相关地址可以在地址前加入&quot;https://ghproxy.com/&quot;代理加速</li>
<li>国内镜像（无需代理）</li>
</ul>
<pre><code class="language-bash">git clone https://gitee.com/zhang-955/clone.git &amp;&amp; cd clone &amp;&amp; cd AutoInstallKali &amp;&amp; chmod +x kalinethunter finaltouchup.sh
./kalinethunter
</code></pre>
<ul>
<li>国外github镜像(完整版同上)</li>
</ul>
<pre><code class="language-bash">curl -LO https://raw.githubusercontent.com/Hax4us/Nethunter-In-Termux/master/kalinethunter
chmod +x kalinethunter
./kalinethunter
</code></pre>
<p>如果下载过程中断需要手动rm（删除）损坏的包，然后重新执行安装脚本(&quot;./开头的是执行脚本命令&quot;)
低版本在通过该系统在安装部分应用时，最新版本可能会出故障</p>
<ul>
<li>获取linux系统权限</li>
</ul>
<pre><code class="language-bash">su
toor
</code></pre>
<p>获取root权限：toor是默认密码，或者kali（Linux的一个用户，Android也有root用户，但不是同一个）
kali内置的工具不做介绍，并且有些需要root才可正常使用</p>
</blockquote>
</blockquote>
<h4 id="android5-6安装系统方法"><a class="header" href="#android5-6安装系统方法">Android5-6安装系统方法</a></h4>
<blockquote>
<ul>
<li>kali见上</li>
<li>安装其他版本(如果一个失败可换其他的)：</li>
</ul>
<blockquote>
<p>1.脚本一键安装(国光)</p>
<pre><code class="language-bash">pkg install proot git python -y
git clone https://github.com/sqlsec/termux-install-linux
cd termux-install-linux
python termux-linux-install.py
</code></pre>
<p>之后输入数字选择对应操作，安装完后使用下面命令启动</p>
<pre><code class="language-bash">#Ubuntu换成自己安装的系统
cd ~/Termux-Linux/Ubuntu #文件所在目录
./start-ubuntu.sh
</code></pre>
</blockquote>
<p>2.通过atlio安装linux系统</p>
<blockquote>
<ul>
<li>精简版本（没内存推荐）</li>
<li>直链需魔法，建议加代理前缀，方法见上</li>
<li>安装<strong>运行依赖</strong></li>
</ul>
<pre><code class="language-bash">pkg install python curl proot
</code></pre>
<blockquote>
<ul>
<li>CN中文版</li>
</ul>
<pre><code class="language-bash">curl -o $PREFIX/bin/atilo https://raw.githubusercontent.com/YadominJinta/atilo/master/CN/atilo_cn &amp;&amp; chmod +x $PREFIX/bin/atilo
</code></pre>
<ul>
<li>EN英文版(多几个镜像)</li>
</ul>
<pre><code class="language-bash">curl -o $PREFIX/bin/atilo https://raw.githubusercontent.com/YadominJinta/atilo/master/atilo &amp;&amp; chmod +x $PREFIX/bin/atilo
</code></pre>
<p>如果提示缺少插件则输入(先更新一次pip，否则不兼容包存在会导致更新失败)</p>
<pre><code class="language-bash">pip install --upgrade pip -i http://pypi.douban.com/simple --trusted-host pypi.douban.com &amp;&amp; pip install 'requests' tqdm 'prettytable' bs4  -i http://pypi.douban.com/simple --trusted-host pypi.douban.com
</code></pre>
<p>安装&amp;启动命令：</p>
</blockquote>
<pre><code class="language-bash">atilo images #列出可用镜像
atilo pull ubuntu #下载&amp;安装ubuntu镜像(自选)
atilo run ubuntu #ubuntu换成安装自己的系统
</code></pre>
<ul>
<li>如果启动过程中提示需要代理而且你又没有代理，可以尝试修改DNS或者换个时间段再试试，一般国内傍晚就连不上了</li>
<li>Github方法（可能需要网络环境）:
&gt;```bash</li>
</ul>
<blockquote>
<p>pkg in git
git clone https://github.com/jerrychen110/atilo
chmod +x ~/atilo
./atilo ubuntu #启动命令</p>
<pre><code>ubuntu换成自己想要的系统，不带参数可以查看命令帮助；启动报错proot可以试试其他方法或者更换网络环境再删除重下系统（一般下载系统镜像不会太快，太快就可能是网络故障）
</code></pre>
</blockquote>
</blockquote>
<p>安装好系统后下面参考linux操作方法开服，不过termux要下载arm64的包，其他设备的linux系统架构自行查看并下载使用对应包</p>
<p>如果apt seach也找不到对应的包可能是你没更新源</p>
</blockquote>
<h4 id="android7安装系统方法"><a class="header" href="#android7安装系统方法">Android7&amp;+安装系统方法</a></h4>
<blockquote>
<ul>
<li>脚本安装（功能丰富，推荐）
&gt;```bash</li>
</ul>
<blockquote>
<p>bash -c &quot;$(curl -Lv gitee.com/mo2/linux/raw/master/debian.sh)&quot;</p>
<pre><code>不重启termux(长按more-&gt;kill 所有会话-&gt;重新启动termux)使用debian-i进入管理面板或startvnc命令进入系统

重启后输入debian即可进入系统
</code></pre>
</blockquote>
<ul>
<li>手动安装（占用少，网络环境要求较高，没魔法国内够呛）
&gt;```bash</li>
</ul>
<blockquote>
<p>pkg install proot-distro
proot-distro install ubuntu
proot-distro login ubuntu #进入系统命令</p>
<pre><code>ubuntu可换成自己喜欢的系统(proot-distro list查看可用镜像)，建议先proot-distro list查看支持系统，有些系统不支持部分手机架构，请阅读其简介下载合适的
</code></pre>
</blockquote>
</blockquote>
<h4 id="termux系统常见问题"><a class="header" href="#termux系统常见问题">termux系统常见问题</a></h4>
<blockquote>
<ul>
<li>旧版termux安装的系统没有内置的互通存储目录，通过创建软链接连接termux储存目录时mv 文件 ../后回到../没有文件，可以去系统的/data/data/com.termux 目录查看，建议直接mv至~(用户目录)</li>
<li><strong>注意：本文往后以Debian系系统(Debian、Ubuntu、Kali等)为例，其他系统包管理器命令自行查找（如ArchLinux的pacman）</strong></li>
<li>apt添加储存库：
&gt;```bash</li>
</ul>
<blockquote>
<p>apt-get install software-properties-common
add-apt-repository ppa:openjdk-r/ppa #jdk8示例</p>
<pre><code></code></pre>
</blockquote>
</blockquote>
<h2 id="各种游戏联机方法示例"><a class="header" href="#各种游戏联机方法示例">各种游戏联机方法示例</a></h2>
<p>只列出部分游戏，主要看自己判断；支持ip直连（内网穿透或公网主机）的也都支持异地组网</p>
<ul>
<li>生存创造类</li>
</ul>
<blockquote>
<p>内+异：MC、TR、饥荒
远程协助：DR2C</p>
</blockquote>
<ul>
<li>经营类</li>
</ul>
<blockquote>
<p>内+异：星露谷</p>
</blockquote>
<ul>
<li>策略类</li>
</ul>
<blockquote>
<p>内+异：铁锈
异：红警，钢4</p>
</blockquote>
<ul>
<li>竞技类</li>
</ul>
<blockquote>
<p>内+异+远：武装原型
异：使命全系列、鸭子游戏、回旋标</p>
</blockquote>
<h2 id="类型一提供ip直连的程序通过中间服务器实现远程联机"><a class="header" href="#类型一提供ip直连的程序通过中间服务器实现远程联机"><strong>类型一</strong>：提供<strong>IP直连</strong>的程序（通过中间服务器实现远程联机）</a></h2>
<p><strong>判断方法</strong>：允许通过输入<strong>字符串类型的值</strong>来连接服务器（如同<strong>浏览器的地址栏</strong>），该类型程序一般允许用户自己创建连接服务器或者直接连接，典型的如：我的世界(Minecraft)、泰拉瑞亚(Terraria)、星露谷物语(Stardew Valley)、铁锈战争(Rusted Warfare)、生存战争(Survivalcraft)联机版等</p>
<hr />
<ol>
<li>
<h3 id="1部署本地服务端必需-准备"><a class="header" href="#1部署本地服务端必需-准备"><strong>1.部署本地服务端(必需-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>启动</strong>对应的<strong>服务端程序</strong>（可能需要填入部分配置信息）并等待部署完成即可，有的软件不自带服务端的启动程序，或者其不能够满足服务器的需求，因此需要下载对应的服务端：</p>
<ul>
<li>
<h4 id="我的世界minecraft"><a class="header" href="#我的世界minecraft">我的世界Minecraft</a></h4>
</li>
</ul>
<h5 id="安装服务端"><a class="header" href="#安装服务端">安装服务端</a></h5>
<p><em>无论何种平台大概流程都是[配置运行环境]--&gt;运行服务器端--&gt;公开服务器端口</em></p>
<ul>
<li>Java端服务器</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.minecraft.net/zh-hans/download/server">Minecraft官方服务器端（纯原版）</a></li>
<li><a href="https://papermc.io/downloads">Paper服务器端（插件+优化）</a></li>
<li><a href="https://hub.spigotmc.org/jenkins/job/BuildTools/">spigot服务器端（插件）</a></li>
<li><a href="https://files.minecraftforge.net/net/minecraftforge/forge/">Forge安装服务器（mod）</a>（下载时若不能跳过广告，一可在下载按钮右键复制链接，单独粘贴链接中URL部分，或者到广告界面查看网页源代码，找到skip附近的链接地址并单独搜索即可）</li>
<li><a href="https://spongepowered.org/downloads/">Forge + Sponge（插件+mod - SpongeMod支持版本少）</a></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>关于Java版开服：</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.oracle.com/java/technologies/downloads/">Java各大平台版本地址</a></li>
<li>OpenJDK on Linux：
&gt;```bash</li>
</ul>
<blockquote>
<p>sudo apt install openjdk-17 #版本与服务端挂钩1.16.5&amp;-请安装使用jdk8</p>
<pre><code></code></pre>
</blockquote>
<p>选择合适服务端需求版本的java后下载服务器端</p>
<p>如果openjdk不能用去官网下对应版本的javajdk/jre，无系统archarm64/arm64，有则按照系统下载对应包</p>
<p>Linux通过终端命令行运行；Windows创建<strong>bat文件</strong>运行服务端</p>
<pre><code class="language-bash">   java -Xms1024M -Xms2048M -jar 服务器端名称.jar
</code></pre>
<ul>
<li>或java -jar 服务端名称.jar自动分配内存。</li>
<li>其中<strong>Xms</strong>为<strong>最小</strong>内存，<strong>Xmx</strong>为<strong>最大</strong>内存，单位可以为M也可以为G，也可以默认自适应。</li>
<li>服务端名称是下载使用哪个服务端就填哪个服务端的名称，<strong>forge</strong>要<strong>先双击安装</strong>程序(需java运行环境)运行并安装服务器端</li>
<li>启动带GUI的服务端可以在后面加 <strong>nogui</strong>来取消运行时启动独立窗口</li>
<li>java是使用默认环境变量的java，当1.16.5&amp;-版本服务器运行时可能不兼容新版，可以在计算机中安装多个版本的java并使用<strong>绝对路径</strong>来运行服务器端如下（Linux用./同理）：</li>
</ul>
<pre><code class="language-bash">&quot;C:\Program Files\Java\jre1.8.0_351\bin\java&quot; -Xms1G -Xmx2G -jar paperc.jar nogui
</code></pre>
<ul>
<li>第一次运行需要先改<strong>eula.txt</strong>文件中eula=后面的false改为<strong>true</strong>即同意上述协议，修改完成后保存再次启动(Linux进入vim默认命令模式后按i进入插入模式开始写入，按ESC切换为命令模式，输入:wq保存并退出，:q!不保存强制退出)</li>
</ul>
<pre><code class="language-bash">sudo apt install vim #linux安装编辑器，已安装跳过
vi eula.txt
</code></pre>
<p>之后再次启动会下载所需文件，耐心等待，若下载出现错误可以开<strong>网络工具</strong>或者在<strong>log报错文件</strong>中找到报错的<strong>文件地址手动下载</strong>，手动下载再失败可以<strong>复制地址到网盘的P2P下载器</strong>下载。</p>
<ul>
<li><strong>Stop</strong>停止并保存服务器，注该开服方法不<strong>适用于</strong>国内版MC，且<strong>国内版</strong>MC与<strong>国际版</strong>并<strong>不能互通</strong>。</li>
</ul>
</blockquote>
<h5 id="mc开服成功后相关内容"><a class="header" href="#mc开服成功后相关内容">MC开服成功后相关内容</a></h5>
<ul>
<li>配置文件</li>
</ul>
<blockquote>
<p>位置：服务器目录下Serverpropreity</p>
<ul>
<li>出生点保护：spawn-protection=16 #半径</li>
<li>启用命令方块：enable-command-block=false #默认关闭，故有些地图无法使用，启用即可正常</li>
<li><a href="https://minecraft.fandom.com/zh/wiki/Server.properties">更多请跳转至wiki</a></li>
</ul>
</blockquote>
<ul>
<li>基本命令</li>
</ul>
<blockquote>
<p>控制台内无&quot;/&quot;，游戏内需加&quot;/&quot;</p>
<pre><code class="language-bash">op 玩家名 #使指定玩家获取权限
deop 玩家名 #作用与op相反
ban 玩家名 #将指定玩家踢出服务器（封禁）
</code></pre>
</blockquote>
<h5 id="java服基础上实现与be基岩互通"><a class="header" href="#java服基础上实现与be基岩互通">Java服基础上实现与BE(基岩)互通</a></h5>
<blockquote>
<p>进不去下载页面试试魔法或代理或修改dns</p>
<p>以下链接为构建页面，选择一个最新构建的分支下载需对应需要的jar</p>
<ul>
<li><a href="https://ci.opencollab.dev//job/GeyserMC/job/Geyser/job/master/">Geyser跨平台翻译组件</a></li>
<li><a href="https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/">Floodgate基岩版离线服组件</a></li>
<li><a href="https://www.spigotmc.org/resources/viaversion.19254/">跨版本插件</a></li>
<li><a href="https://geyser.superiormc.cn/user-guide/da-jian">关于Geyser</a>:</li>
</ul>
<blockquote>
<p>Geyser-Fabric安装在mods文件夹
&gt;服务器要求使用任何 客户端Mod 都会导致基岩版玩家无法进入服务器，
Geyser-Spigot作为插件安装在plugins文件夹，服务器内/reload /reload confirm可以重载服务器插件
Geyser-Velocity独立端，单独窗口运行</p>
<ul>
<li>quote：如果你使用的服务端核心并不支持 Java 16，请在 启动参数 添加 -DPaper.ignoreJavaVersion=true 来使得你的服务端能够正常运行。</li>
<li>如果你的服务端核心实在无法在 Java 16 上运行，请考虑使用 独立版。</li>
<li>手机版开互通服不建议使用独立端，需要较高性能</li>
<li>一些旧版本的 Geyser 只和 Floodgate 1.0 适配而不支持 Floodgate 2.0，所以建议最新版</li>
</ul>
</blockquote>
<ul>
<li>
<p><a href="https://geyser.superiormc.cn/floodgate-wiki/da-jian-he-yong-fa">关于Floodgate</a>:
&gt;下载并放置在服务端目录下plugins文件夹内
&gt;+ <em>quote：你可以在各个子服上安装 Floodgate (但 Geyser 真的没必要) 来增强玩家的皮肤显示功能和在子服上使用 Floodgate API。如果你要这么做，你 必须 保证你将代理服务端内 Floodgate 文件夹内的 key.pem 文件放置到了 所有子服的 Floodgate 文件夹内的相同位置，否则，基岩版客户端无法加入服务器。</em>
&gt;+ 你只需在使用独立版上进行此步骤：复制 Floodgate 配置所在的目录下的 key.pem 文件到 Geyser独立版 的文件夹内。不要尝试将这个文件分享给其他人！这个密钥文件允许基岩版账号绕过 Java 版身份验证，如果有人拿到了它，他们可能会对您的服务器造成严重破坏
&gt;+ 在你的 Floodgate 配置中，将 username-prefix 设置为你需要的前缀 - 你可以设置为 &quot;&quot; 以关闭基岩版前缀功能。
&gt;&gt; <em>在一些旧版本的 Paper 服务器（或者 Paper 的一些分支），你或许需要关闭你的服务器并删除你的 服务端 jar 文件同目录下的的usercache.json 文件以避免出现你的老的 Floodgate 玩家的前缀没有更新的问题。</em></p>
</li>
<li>
<p>配置完Geyser[&amp;Floodgate]后，服务端就配置完成了</p>
</li>
</ul>
</blockquote>
<h5 id="仅基岩版相关"><a class="header" href="#仅基岩版相关">仅基岩版相关</a></h5>
<blockquote>
<p>适合只开手机服务器的用户</p>
<ul>
<li><a href="https://www.minecraft.net/en-us/download/server/bedrock/">单基岩版官方服务端无插件互通官网</a>
在termux中的启动命令</li>
</ul>
<pre><code class="language-bash">####下载并解压服务端文件####
wget https://minecraft.azureedge.net/bin-linux/bedrock-server-1.18.12.01.zip #换成自己版本
unzip bedrock-server-1.18.12.01.zip -C minecraftbeserver/ #目录换成你自己想要的好记的名
####运行命令####
LD_LIBRARY_PATH=. ./bedrock_server
</code></pre>
<ul>
<li>修改配置文件同上，如：player-idle-timeout=0 #挂机踢出时间，0为不因挂机超时踢出玩家</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="泰拉瑞亚terraria"><a class="header" href="#泰拉瑞亚terraria">泰拉瑞亚Terraria</a></h4>
</li>
</ul>
<blockquote>
<p>1.4以下版本win用户可不安装新版dotnet，建议先启动试试不能启动再安装运行环境。另外：手机termux开tshock的服必须在proot/chroot环境中，需要安装一个linux系统</p>
<ul>
<li><a href="https://dotnet.microsoft.com/zh-cn/download/">通过安装dotnet启动Win&amp;Linux：dotnet官网链接</a></li>
</ul>
<blockquote>
<p>Windows安装dotnet后双击服务端程序直接运行即可</p>
<p>Windows游戏存档等目录：资源管理器---&gt;左侧：我的文档/My Games/Terraria/
+Linux安装dotnet命令(termux旧版使用mono)：</p>
<pre><code class="language-bash">sudo apt install dotnet-sdk-6
</code></pre>
</blockquote>
<ul>
<li>Linux或使用脚本安装
&gt;```bash</li>
</ul>
<blockquote>
<p>wget https://dot.net/v1/dotnet-install.sh -Oc dotnet-install.sh
sudo chmod +x ./dotnet-install.sh
./dotnet-install.sh  --channel 6.0 #可修改版本，推荐6.0
dotnet TerrariaServer.exe #运行服务器</p>
<pre><code></code></pre>
</blockquote>
<ul>
<li>Linux或其他平台通过mono启动
&gt;注：使用mono最大支持<a href="https://github.com/Pryaxis/TShock/releases/download/v4.5.18/TShock4.5.18_Terraria1.4.3.6.zip">1.4.3.6及以下版本的TShock(github直链)</a> ，<strong>Android6&amp;-我目前没有开</strong>1.4.3.6TShock的方法，<strong>新版TShock需要dotnet</strong>
&gt;<a href="https://www.mono-project.com/download/">mono官网</a>
&gt;```bash</li>
</ul>
<blockquote>
<p>apt install mono-complete</p>
<pre><code>*TerariaServer.exe服务端游戏本体目录下自带，linux也是先下载游戏本体，进入游戏目录运行服务端文件*

</code></pre>
</blockquote>
<ul>
<li>Linux原版服务器：
&gt;```bash</li>
</ul>
<blockquote>
<p>#64位操作系统先执行以下命令
sudo add-apt-repository multiverse
sudo dpkg --add-architecture i386
sudo apt update
sudo apt install lib32gcc1
#下面安装steamcmd，steam也可以，在游戏目录启动游戏即可
sudo apt install steamcmd
./usr/games/steamcmd #sudo bash ./...
login + 用户名 #登录帐号
app_update 105600 #安装terraria
cd ~/Steam/steamapps/common/Terraria
./TerrariaServer.bin.x86_64 #运行服务端</p>
<pre><code>Linux游戏存档等路径：~/.local/share/Terraria/

</code></pre>
</blockquote>
<ul>
<li><a href="https://github.com/Pryaxis/TShock/releases">TShock（相比原版可以装插件）</a>
&gt;去官网复制下载链接，然后通过wget下载tshock的zip文件，之后使用unzip工具解压
&gt;```</li>
</ul>
<blockquote>
<p>wget -c #目标地址，-c是意外中断后再次下载能接上
sudo apt install unzip
unzip TShock*.zip -d tshock 
cd tshock
tar -xf TShock*.tar #解压目标文件，-C 加已经创建好的目录地址
mono TerrariaServer.exe #启动命令</p>
<pre><code>*如果提示开始下载dotnet之后失败，则先自己安装dotnet，见上*

+ 开服后看情况保存超级管理员代码，只有第一次显示，没记下来如果需要可以删除tshock.sqlite&amp;auth.lck文件然后重启，或者其他方法见下
+ TShock安装插件：将插件名.dll放在ServerPlugins下，重启后TShock会自动生成相应的配置文件
+ 版本差异时可以使用插件解决（如不同平台最新版不同时，但只能跨一个大版本内的子版本）[CrossPlay跨版本插件](https://github.com/Moneylover3246/Crossplay)
+ 通过控制台移动用户组至admin组获得管理权限（常用），或是游戏内输入/auth [authcode]获取超管权限，也可移动用户组至superadmin(超级管理员)，但是**不建议**用超管游玩，**超级管理的角色数据不会被保存**
+ config.json配置文件在tshock目录下，如出生点保护范围之类，可以进行查阅&amp;修改，之后重启更新服务器，[TShock官方帮助文档](https://ikebukuro.tshock.co/)；[相关链接推荐csdn1](https://blog.csdn.net/shuishen49/article/details/54743316)；[相关链接推荐csdn2]([https://blog.csdn.net/junknow/article/details/128260828)
+ TShock基本命令(控制台内无&quot;/&quot;，游戏内需加&quot;/&quot;)：
&gt;+ 游戏内：
&gt;/register 密码
&gt;
&gt;/login [password]
&gt;
&gt;/auth [authcode]
&gt;
&gt;+ 控制台：
&gt;```bash
&gt; ban 玩家名
&gt; help [页数]
&gt;```
</code></pre>
</blockquote>
<ul>
<li><a href="https://store.steampowered.com/app/1281930/tModLoader/">TML（Steam商店地址)(可装Mod）</a>
&gt;```bash</li>
</ul>
<blockquote>
<p>#还是terraria的目录下
#steam更新命令：app_update &lt;应用ID&gt; [-beta &lt;测试名称&gt;] [-betapassword &lt;密码&gt;] [validate] 版本号自行查看，validate可以不成功时再加
app_update 1281930 +tml版本号 validate
./start-tModLoaderServer.sh</p>
<pre><code></code></pre>
</blockquote>
<ul>
<li><strong>exit</strong>停止并保存服务器，该开服方法不<strong>适用于</strong>国内版TR，且<strong>国内版</strong>TR与<strong>国际版</strong>并<strong>不能互通</strong>。</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="生存战争survivalcraft联机版"><a class="header" href="#生存战争survivalcraft联机版">生存战争Survivalcraft联机版</a></h4>
</li>
</ul>
<blockquote>
<p><strong>作者团队</strong>及其<strong>教程地址</strong>：<a href="https://space.bilibili.com/292546719?spm_id_from=333.337.search-card.all.click">瓦西里沃尔特 bilibili</a></p>
</blockquote>
<ul>
<li>
<h4 id="vue网站基本命令"><a class="header" href="#vue网站基本命令">Vue网站基本命令</a></h4>
</li>
</ul>
<p>需先安装<strong>Node.js</strong>
&gt;
&gt;<code>bash npm install vue-cli -g 安装vue-cli vue init webpack my-project  初始化项目 npm install  安装项目依赖 npm run build 生成上线目录部署 nmp run dev 本地测试服务器 &gt;</code></p>
<blockquote>
<p><strong>Ctrl+C</strong>关闭服务器</p>
</blockquote>
<ul>
<li>
<h4 id="hexo网站基本命令"><a class="header" href="#hexo网站基本命令">Hexo网站基本命令</a></h4>
</li>
</ul>
<p>需先安装<strong>Node.js</strong>和<strong>Git</strong>
&gt;<code>bash npm install hexo-cli -g 安装hexo-cli hexo init 文件夹名 cd进去后npm install安装npm即完成 hexo new &quot;文章名&quot; 新文章 hexo new page &quot;页面名&quot; 生成新页面 hexo s 本地预览 hexo g 上传暂存区 hexo d 上传到Github hexo server -p 端口号 修改本地部署的端口 &gt;</code></p>
<blockquote>
<p><strong>Ctrl+C</strong>关闭服务器</p>
</blockquote>
</blockquote>
<ol start="2">
<li>
<h3 id="2监听程序端口可跳过-准备"><a class="header" href="#2监听程序端口可跳过-准备"><strong>2.监听程序端口(可跳过-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p>这里也给出了一些常见的应用端口，如果包含在内，或者已知，请跳过此步骤</p>
<p><em><strong>先启动游戏服务器或创建局域网房间后才能看到其端口和协议类型，下面列出常见软件的协议类型及其端口</strong></em></p>
<ul>
<li><strong>网站默认http/https</strong>(vue：<strong>8080</strong>；PHPstudy：<strong>80</strong>；Hexo：<strong>4000</strong>；......)</li>
<li><strong>泰拉瑞亚Terraria自带</strong>或<strong>TShock</strong>：TCP<strong>7777</strong></li>
<li><strong>我的世界Minecraft：Java</strong>：TCP<strong>25565</strong>；内置服务端<strong>随机</strong>；<strong>BE基岩版</strong>：UDP<strong>19132</strong>（互通服两个都要映射）</li>
<li><strong>铁锈战争Rusted Warfare</strong>：TCP<strong>5132</strong></li>
<li><strong>生存战争Survivalcraft联机版</strong>：UDP<strong>28887</strong></li>
<li><strong>星露谷物语Stardew Valley</strong>：UDP<strong>24642</strong></li>
<li><strong>像素工厂Mindustry</strong>：<strong>TCP+UDP双协议映射&amp;相同对外端口</strong></li>
<li><strong>饥荒</strong>：UDP<strong>地上10999&amp;地下10998</strong></li>
<li>......（有的游戏服务器需要<strong>两条隧道</strong>才能正常运行，例如：<strong>未转变者Unturned</strong>(<strong>quit</strong>退出并保存服务器)、MC互通服等）</li>
</ul>
<p><em><strong>如果出现报错显示端口被占用相关问题，可以修改配置文件改变游戏默认的端口号，但有的程序不提供配置文件修改端口号，那也可以在下面操作找到占用该端口号的程序并将它结束掉；linux系统结束程序在下面</strong></em></p>
<p><em><strong>一般游戏端口及其协议类型可以搜到，或者界面会告诉你，如果没有再进行下面的步骤</strong></em></p>
<hr />
<p><img src="https://s11.ax1x.com/2023/08/15/pPM5759.png" alt="图片加载失败了，不过不影响" /></p>
<ul>
<li>
<h4 id="windows操作系统"><a class="header" href="#windows操作系统"><strong>Windows操作系统</strong></a></h4>
</li>
</ul>
<blockquote>
<ol>
<li><strong>启动资源监视器</strong>
&gt;</li>
</ol>
<blockquote>
<ul>
<li>方法一：直接运行，按下<strong>Win+R</strong>，输入以下内容
<code>C:\Windows\System32\perfmon.exe</code></li>
<li>方法二：<strong>右键</strong>windows菜单栏 ——&gt; 选择<strong>任务管理器</strong> ——&gt; 选择<strong>性能</strong>一栏 ——&gt; 下面单击“<strong>打开资源监视器</strong>”</li>
</ul>
</blockquote>
<ol start="2">
<li><strong>监听程序端口</strong></li>
</ol>
<p><img src="https://s11.ax1x.com/2023/08/15/pPM5xbD.png" alt="图片加载失败了，看视频吧，或者复制图片地址到浏览器地址栏里手动浏览" /></p>
<blockquote>
<p>在菜单栏<strong>网络</strong>下的页面划到<strong>监听端口</strong>一栏
我们需要的是目标游戏的<strong>传输协议类型</strong>和它的<strong>端口号</strong>
这里以<strong>TShock</strong>为例，它的<strong>默认端口号</strong>为<strong>7777</strong>，<strong>协议类型</strong>是<strong>TCP</strong>
一般<strong>游戏</strong>的协议为<strong>TCP</strong>或<strong>UDP</strong>，要根据协议类型选择**合适的映射（内网穿透）**工具，因为有的映射工具不支持UDP，还有的不支持TCP、http。</p>
</blockquote>
</blockquote>
<ul>
<li>
<h4 id="linux操作系统"><a class="header" href="#linux操作系统"><strong>Linux操作系统</strong></a></h4>
</li>
</ul>
<blockquote>
<p>打开<strong>终端</strong>，输入
<code>netstat -a</code></p>
<ul>
<li>参数含义：-a 显示所有；-n 以ip形式显示当前建立的有效连接和端口；-u 显示UDP协议；-t 显示TCP协议；-p 显示对应PID与程序名</li>
<li>如果该方法不可用，可尝试安装nmap扫描本地端口</li>
</ul>
</blockquote>
</blockquote>
<ol start="3">
<li>
<h3 id="3内网穿透方式通用-实现"><a class="header" href="#3内网穿透方式通用-实现"><strong>3.内网穿透方式(通用-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>前言：<strong>这里主要介绍基于</strong>第三方免费平台</strong>的内网穿透，<em><strong>倘若</strong>自己部署内网穿透，需要一份有固定公网ip的服务器和一个已经备案的域名，这里不讲，想要部署的可以自己搜索相关教程，还是挺全面的。</em></p>
<p><img src="https://s11.ax1x.com/2023/08/15/pPMo8fA.png" alt="内网穿透流程图，可能不正确" /></p>
<p><strong>我在这里列出常见的平台</strong>：（以下为<strong>普通用户配置:不购买套餐</strong>）</p>
<ul>
<li>
<h4 id="常见平台1mbps128kb18mb"><a class="header" href="#常见平台1mbps128kb18mb">常见平台（1M(bps)=128KB=1/8MB）</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://hsk.oray.com/"><strong>花生壳</strong></a>：极低的学习成本；<strong>实名1M/s</strong>每月1G且<strong>无Http</strong>和<strong>UDP</strong>，固定域名</li>
<li><a href="https://www.cpolar.com/"><strong>cpolar</strong></a>：学习成本低；无需实名；无限流量；<strong>动态域名</strong>且<strong>无</strong>UDP；速度较低；<strong>http</strong>协议提供<strong>免费动态域名</strong></li>
<li><a href="https://www.fgnwct.com/"><strong>飞鸽</strong></a>：学习成本低；<strong>0.5M/s</strong>，签到给流量；<strong>http</strong>协议提供<strong>免费域名</strong>；<strong>免费两条</strong>隧道但<strong>http只能一条</strong></li>
<li><a href="https://www.mefrp.com/"><strong>MirrorEdge Frp镜缘(莱云)映射</strong></a>：学习成本一般；<strong>1元实名刷脸</strong>；速度限制取决于所选节点，隧道固定域名</li>
<li><a href="https://www.openfrp.net"><strong>OpenFrp 内网穿透</strong></a>：学习成本低(带GUI启动器和樱花相似)免费，签到领流量；<strong>部分节点</strong>无需实名；速度<strong>限制</strong>12M/s(速度取决于所选节点与访客距离)；固定域名；<strong>http</strong>协议需要<strong>绑定自己的域名</strong></li>
<li><a href="https://natapp.cn/"><strong>NATAPP</strong></a>：学习成本一般；<strong>动态域名</strong>；<strong>实名</strong>；1Mbps；<strong>http</strong>协议提供<strong>免费域名</strong></li>
<li><a href="https://xiaomy.net"><strong>网云穿</strong></a>：学习成本低；<strong>实名</strong>；每<strong>月1G</strong>；前7天3M/s会员，后面<strong>锁TCP</strong>且<strong>1M/s</strong>，固定域名</li>
<li><a href="https://ngrok.com/"><strong>ngrok</strong></a>：学习成本一般；无需实名；只给<strong>一条免费隧道</strong>，离得近的节点延迟较低；http会<strong>自动换https</strong>协议（相当于<strong>不支持http</strong>）</li>
<li><a href="http://www.nat123.com/">Nat123</a>：学习成本一般；<strong>无需实名</strong>但<strong>支付实名</strong>；<strong>新</strong>账号只给<strong>5个N币</strong>；<strong>&lt;1M/s</strong>；支持<strong>自定二级域名</strong>；仅支持<strong>http协议</strong></li>
<li><a href="http://www.ipyingshe.com/">闪库</a>：1M；<strong>仅支持Http</strong>，<strong>随机固定</strong>域名；未来可能实名
<strong>（以下是其他我没用过的内网穿透）</strong></li>
<li><a href="https://www.natfrp.com"><strong>樱花</strong></a>：学习成本低；<strong>1毛付费刷脸实名必须18+</strong>；新5/老10M/s速度限制，固定域名，进不去网上有备用路线</li>
<li><a href="https://github.com/fatedier/frp"><strong>frp</strong></a>：有较高的学习成本，是自己部署内网穿透的开源工具，但需要<strong>有条件（公网主机）</strong>，可扩展性强，不少内网穿透就是基于它的(例如莱云、Locyan、凿洞)</li>
<li><a href="https://www.ngrok.cc/">Sunny-Ngrok</a>:1块付费刷脸实名；<em>钉钉内网穿透</em>:早已停止服务；<a href="https://flynat.51miaole.com/">蜻蜓</a>、<a href="http://www.youtusoft.com/">网络通</a>无法注册；<a href="https://www.locyanfrp.cn/">LoCyan Frp</a>:之前节点不可用，最近Q群审核使用；<a href="https://frp.wiki/">凿洞Free Frp</a>:我不会用，它老报错；<em>U-anywhere万由云</em>；<em>QuickConnect</em>；<em>哲西云</em>:加入花生壳了；<em>nat123</em>；<em>Tinc</em></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="内网穿透操作流程"><a class="header" href="#内网穿透操作流程"><strong>内网穿透操作流程</strong></a></h4>
</li>
<li>
<p><strong>网页+平台类型</strong></p>
</li>
</ul>
<blockquote>
<ol>
<li>注册账号填写并完善相关信息(如绑定验证账号、实名等，没有则跳过)，然后后再进入<strong>控制面板</strong></li>
<li>创建<strong>隧道</strong>（有的在本地创建隧道，形式不一，但需要的信息基本一样），填入相关信息：隧道名、<strong>协议类型</strong>、<strong>本地地址(127.0.0.1或局域网地址)<strong>以及</strong>本地端口</strong>（上面查的）。（有的支持自定义子域名或绑定自己的域名，也有的支持一定限度内自定义对外端口号，也有的允许你自选节点，可以根据配置需要选择）</li>
<li>云端部署好后开始<strong>部署本地</strong>，先<strong>下载</strong>对应平台的<strong>服务端程序</strong>，<strong>有的</strong>需要将其<strong>与个人账号绑定</strong>，一般是通过个人账户的Token（或口令、密钥等）进行绑定；</li>
<li>复制云端<strong>隧道创建后给的Token</strong>与本地映射服务端进行<strong>绑定</strong>，或者给予窗口选择自己的隧道并<strong>启动</strong>，启动后给出的<strong>地址</strong>（一般为：地址:端口号；像http类型只有地址）就是他人访问的所用到的信息了。</li>
</ol>
</blockquote>
<ul>
<li><strong>应用平台类型</strong>（相对简单）</li>
</ul>
<blockquote>
<ol>
<li><strong>注册</strong>账号填写并完善相关信息</li>
<li>创建隧道填入：隧道名、<strong>协议类型</strong>、<strong>本地地址</strong>、<strong>本地端口</strong>、[自选节点或宽带套餐]等信息</li>
<li><strong>启动</strong>隧道，即可获取我们所需的地址（一般为：<strong>地址:端口号</strong>；像http类型只有地址）</li>
</ol>
</blockquote>
<ul>
<li><strong>访客使用地址教程</strong></li>
</ul>
<blockquote>
<p><strong>网页</strong>：访客将给定的地址直接<strong>粘贴</strong>到浏览器的<strong>地址栏</strong>访问；<strong>主机</strong>可以用<strong>localhost</strong>或<strong>127.0.0.1</strong>访问
<strong>游戏</strong>：访客选择<strong>多人游戏</strong>并选择<strong>加入</strong>相关，<strong>填入给定的地址</strong>加入即可；<strong>主机</strong>可以用<strong>localhost</strong>或<strong>127.0.0.1</strong>访问。</p>
<ul>
<li>只给一个填写IP地址的输入框，则填写 <strong>地址:端口号</strong> 的形式（如：MCJava版）</li>
<li>同时给出IP地址和端口号地址的，各填入各所需的地址和端口，<strong>英文冒号直接省去</strong>（如：Terraria、MCBE版）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="图文示例"><a class="header" href="#图文示例"><strong>图文示例</strong></a></h4>
</li>
</ul>
<blockquote>
<p>此处以Terraria的<strong>TShock服务端</strong>和<strong>Cpolar和飞鸽内网穿透</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：</p>
<ul>
<li><strong>Cpolar 快捷方法</strong>：
<blockquote>
<p>这是Cpolar较为便捷的操作方式
<img src="https://s11.ax1x.com/2023/08/15/pPMoDYj.png" alt="Cpolar方法一" /></p>
</blockquote>
</li>
<li><strong>通用方法-以Cpolar和飞鸽为例</strong>：
<blockquote>
<p>①②和Cpolar快捷方法的一样，创建后隧道管理界面会有相应隧道的访问地址
<img src="https://s11.ax1x.com/2023/08/15/pPMo6lq.png" alt="Cpolar方法二" />
启动后访问地址在隧道管理界面可见
<img src="https://s11.ax1x.com/2023/08/15/pPMogXV.png" alt="飞鸽方法" /> </p>
</blockquote>
</li>
</ul>
</blockquote>
</blockquote>
<ol start="4">
<li>
<h3 id="4ipv6公网方式条件-实现"><a class="header" href="#4ipv6公网方式条件-实现"><strong>4.IPv6公网方式(条件-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<ul>
<li><strong>前言：理想状态下</strong>，IPv6延迟低，操作简单，免费且无需账号、认证等，不过前提是你的<strong>网络运营商向你提供IPv6服务</strong>，且你的电脑<strong>能够正常识别和使用</strong>，详细判断是否可用和配置教程可见相关教程<a href="https://www.bilibili.com/video/BV1Lb4y1o7SF">【mc开服】教你白嫖运营商公网ipv6跟好兄弟联机】</a></li>
<li>主机启动服务器后，访问端以 <strong>[对方的IPv6地址]:端口号</strong> 的格式直接连接即可</li>
<li>注：这里没有条件不做演示，可移步到上方链接观看推荐视频学习。</li>
</ul>
</blockquote>
<h2 id="类型二提供局域网的程序通过异地组网实现远程联机"><a class="header" href="#类型二提供局域网的程序通过异地组网实现远程联机"><strong>类型二：提供局域网的程序</strong>（通过异地组网实现远程联机）</a></h2>
<p><strong>判断方法</strong>：提供IP直连的基本都支持局域网，因为你可以用路<strong>由器分配的地址</strong>和<strong>对应程序的端口</strong>实现<strong>内网中不同设备</strong>的<strong>信息交换</strong>，只是可能有些程序不提供现成的独立页面和自动搜索；也有一些程序仅支持使用局域网联机不开放IP直连，此类游戏一般<strong>有多人游戏的入口</strong>但既<strong>没有本地预设的P1234玩家位置</strong>，也没有IP直连的输入框，可能能够<strong>自动搜索</strong>网络下的房间。</p>
<ol>
<li>
<h3 id="1部署本地服务器必需-准备"><a class="header" href="#1部署本地服务器必需-准备"><strong>1.部署本地服务器(必需-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>启动</strong>对应的<strong>服务端程序</strong>（可能需要填入部分配置信息）并等待部署完成即可，有的软件不自带服务端的启动程序，或者其不能够满足服务器的需求，因此需要下载对应的服务端</p>
<ul>
<li>
<h4 id="局域网房间通式"><a class="header" href="#局域网房间通式">局域网房间通式</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li>房主：启动目标游戏---&gt;多人游戏---&gt;创建主机---&gt;启动组网程序并加入同一组网网络---&gt;等待其他玩家加入</li>
<li>访客：启动目标游戏---&gt;多人游戏---&gt;启动组网程序并加入同一组网网络---&gt;回到游戏在局域网下搜索主机并加入对应的房间</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="泰拉瑞亚terraria示例eg"><a class="header" href="#泰拉瑞亚terraria示例eg">泰拉瑞亚Terraria（示例eg）</a></h4>
</li>
</ul>
<blockquote>
<p>房主启动游戏后选择多人游戏---&gt;创建主机即可（pe，pc同理）</p>
</blockquote>
<ul>
<li>
<h4 id="我的世界minecrafteg"><a class="header" href="#我的世界minecrafteg">我的世界Minecraft（eg）</a></h4>
</li>
</ul>
<blockquote>
<h5 id="方法一启用游戏内置局域网服务器"><a class="header" href="#方法一启用游戏内置局域网服务器">方法一：启用游戏内置局域网服务器</a></h5>
<blockquote>
<p>房主启动游戏后选择单人游戏---&gt;进入选定世界---&gt;按键ESC---&gt;对局域网开放---&gt;(允许作弊：启用命令)创建一个局域网世界(给定的随机端口也可nat使用，但没必要)</p>
</blockquote>
<h5 id="方法二部署服务端"><a class="header" href="#方法二部署服务端">方法二：部署服务端</a></h5>
<blockquote>
<p>请跳转至内网穿透部分查看部署服务器端方法，部署完后再回来下一步</p>
</blockquote>
</blockquote>
</blockquote>
<ol start="2">
<li>
<h3 id="2异地组网方式通用-实现"><a class="header" href="#2异地组网方式通用-实现"><strong>2.异地组网方式(通用-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>前言：<strong>异地组网相较于其他方式依赖于</strong>软件的自动搜索</strong>，只是在理论上简单，实际操作更可能遇到问题，此时最好查询<strong>官方文档</strong>，这里我提出以下<strong>两</strong>点建议：</p>
<ol>
<li>组网成功后可以在<strong>命令提示符</strong>中<strong>ping</strong>软件给出的<strong>虚拟网内其他用户的地址</strong>，以检查是否能够连通，若不能ping通大概率是不成功的</li>
<li>若<strong>能ping通</strong>但软件自动搜索<strong>不能搜到</strong>，则<strong>检查防火墙</strong>的相关配置，若还是不行可以在对应的<strong>社区咨询</strong></li>
</ol>
<ul>
<li>
<p><strong>中转服务器类型异地组网</strong>
<img src="https://s11.ax1x.com/2023/08/15/pPMof7F.png" alt="异地组网流程图，但不一定正确" /></p>
</li>
<li>
<p><strong>P2P类型异地组网</strong>
<img src="https://s11.ax1x.com/2023/08/15/pPMo5tJ.png" alt="异地组网流程图，但不一定正确" />
<strong>我在这里列出常见的平台</strong>：（以下为<strong>普通用户配置:不购买套餐</strong>)</p>
</li>
<li>
<h4 id="常见平台"><a class="header" href="#常见平台">常见平台</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://pgy.oray.com/download/"><strong>蒲公英(已不完全免费)</strong></a>：学习成本低；付费不推荐，简单，只要<strong>登录同一个账号</strong>即可；</li>
<li><em><strong>Hiper</strong></em>(重名太多找不到链接)：<strong>一个</strong>注册的<strong>账号付费后</strong>可以邀请其他人加入使用；签到送时长；学习成本低；宽带较好</li>
<li><a href="https://bugxia.com/357.html"><strong>EasyN2N</strong></a>：学习成本较低；<strong>只能Windows间使用</strong>，会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；加入同一个小组即可</li>
<li><strong><a href="https://www.radmin-lan.cn/">Radmin LAN</a></strong>：学习成本低；<strong>只能Windows间使用</strong>，会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；加入同一个房间即可</li>
<li><strong><a href="https://www.7iot.net/">UDPPLAN(博客)</a></strong>：会<strong>选择自动安装</strong>一个<strong>虚拟网卡</strong>；简单免费；无需账号</li>
<li><strong><a href="https://www.teamviewer.cn/cn/">TeamViewer</a></strong>(<strong>安装</strong>要选<strong>VPN)</strong>：学习成本低；简单易用；但<strong>需要注册账号</strong></li>
<li><strong><a href="https://www.zerotier.com/">ZeroTier</a></strong>：有一定学习成本；会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；管理能力强；但<strong>对网络要求较高，不过可以自己搭建plant</strong></li>
<li><strong><a href="https://tailscale.com/">Tailscale</a></strong></li>
<li><strong><a href="https://pk.llren.com/">游侠(已不完全免费)</a>十分简单，需要实名认证</strong></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="异地组网操作流程"><a class="header" href="#异地组网操作流程"><strong>异地组网操作流程</strong></a></h4>
</li>
</ul>
<blockquote>
<p>0.注册账号[可能没有这一步]
1.<strong>创建</strong>一个<strong>网络</strong>，将<strong>网络的ID和验证密钥</strong>或者<strong>是网络名称和密钥</strong>给访客
2.访客通过给定的密钥加入该网络，即可实现异地组网</p>
<ul>
<li>无论是主机还是访客创建，只要在同一个网络下都一样，如果主机无法创建网络可以让访客试试</li>
<li>房主创建本地服务器后，一般进入游戏选择多人游戏在局域网下搜索房主即可，有的游戏允许其他人通过组网平台给定的ip直连</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="图文示例-1"><a class="header" href="#图文示例-1"><strong>图文示例</strong></a></h4>
</li>
</ul>
<blockquote>
<p>此处以<strong>蒲公英</strong>和<strong>红警2</strong>、<strong>RadminLAN</strong>和<strong>Minecraft</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：</p>
<ul>
<li><strong>蒲公英</strong>使用方法：
<img src="https://s11.ax1x.com/2023/08/15/pPMo711.png" alt="蒲公英使用教程" /></li>
<li><strong>RadminLAN</strong>使用方法（<strong>通用</strong>）：
<img src="https://s11.ax1x.com/2023/08/15/pPMoO0O.png" alt="RadminLAN使用教程" /></li>
</ul>
</blockquote>
</blockquote>
<h2 id="类型三本地预留位置的游戏通过远程控制实现远程联机"><a class="header" href="#类型三本地预留位置的游戏通过远程控制实现远程联机"><strong>类型三：本地预留位置的游戏</strong>（通过远程控制实现远程联机）</a></h2>
<blockquote>
<p><strong>前言：<strong>远程控制操作起来相对简单，<strong>一般</strong>只能</strong>主机用手柄</strong>，其他连接的<strong>访客只能用键鼠</strong>。示例以<strong>向日葵</strong>为例，这里我列出常见的远程控制软件：</p>
<ul>
<li>
<h3 id="常见平台-1"><a class="header" href="#常见平台-1">常见平台</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li><strong><a href="https://im.qq.com/index">QQ</a>/<a href="https://tim.qq.com/">TIM</a><strong>仅支持</strong>PC</strong>间控制，免费但画质一般，有一定延迟，并且<strong>只能一对一</strong>连接；在好友面板选择<strong>远程协助</strong>，等待对方同意即可</li>
<li><strong><a href="https://sunlogin.oray.com/">向日葵</a></strong>（v12绿色版无需账号登录）：免费，可以<strong>多设备连接一台设备</strong>，功能较全；只需要把<strong>ID和验证码</strong>发给好友即可让好友远程控制。（连接人数较多时可能卡顿，<strong>重启</strong>向日葵服务并让好友们重新加入即可）</li>
<li><strong><a href="https://www.teamviewer.cn/cn/">TeamViewer</a></strong>：免费；只需要把<strong>ID和验证码</strong>发给好友即可让好友远程控制。</li>
<li><strong><a href="https://parsec.app/">Parsec</a></strong>（<strong>win10+</strong>）：免费，易用，可以<strong>跨平台</strong>但有相应的<strong>系统版本限制</strong>，功能非常齐全，对游戏方面更加友好，但可能对网络有一定要求，不过有<strong>网页端</strong>可以用；既可以分享主机地址让他人加入(需要<strong>手动接受</strong>加入请求)，也可以创建公开房间或者加入处于公开状态的房间来远程控制联机</li>
<li><a href="https://meeting.tencent.com/"><strong>腾讯会议</strong></a>：免费简单；可能有一定延迟，视自己网络属性而定。</li>
<li><strong><a href="https://store.steampowered.com/about/">Steam</a>远程畅玩</strong>(流式传输)：免费，最简单，但<strong>需要双方互加好友</strong>(Steam有一定条件)，而且对<strong>网络要求较高，可能用不了</strong>，需要有人<strong>游戏在库中</strong>；游戏内<strong>Shift+Tap</strong>唤出好友列表<strong>邀请</strong>好友远程畅玩即可</li>
<li><strong><a href="https://anydesk.com/zhs">AnyDesk</a>；<a href="https://www.todesk.com/solo?v=4">ToDesk</a></strong></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="远程控制操作流程"><a class="header" href="#远程控制操作流程"><strong>远程控制操作流程</strong></a></h3>
</li>
</ul>
<blockquote>
<p>1.配置好游戏后，<strong>启动</strong>对应的远程协助软件，并<strong>通知好友启动</strong>相同的软件
2.将你的<strong>ID密钥</strong>给予好友，好友选择<strong>加入/连接</strong>功能远程获取你电脑的<strong>控制权及画面</strong>(QQ、Steam无密钥)?</p>
<ul>
<li>
<h3 id="图文示例-2"><a class="header" href="#图文示例-2"><strong>图文示例</strong></a></h3>
此处以<strong>向日葵</strong>和<strong>DR2C</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：
<strong>向日葵</strong>使用方法：
<img src="https://s11.ax1x.com/2023/08/14/pPMLM0P.png" alt="向日葵联机教程" />
<em>我不说是谁，好像有人的demo拼成了dome</em></li>
</ul>
</blockquote>
</blockquote>
<h2 id="其他附加问题"><a class="header" href="#其他附加问题"><strong>其他附加问题</strong></a></h2>
<blockquote>
<ul>
<li><strong>若需手柄但没有</strong>，可以尝试使用<strong>DroidJoy</strong>或<strong>MyJoy</strong>等软件将<strong>安卓</strong>手机转为手柄并连接电脑，亦或者是其他方法都。</li>
<li><strong>若好友电脑没有麦克风</strong>可以使用<strong>WO Mic</strong>来让<strong>安卓</strong>手机变为<strong>麦克风</strong>。</li>
<li><strong>内网穿透要求实名但不满条件</strong>的，可以尝试不断使用<strong>新兴的</strong>或者<strong>国外的</strong>内网穿透工具，一般需要提交的信息较少</li>
<li>游戏联机时非远程协助联机的<strong>服务器端的版本</strong>必须与<strong>用户端的版本</strong>相匹配，像<strong>TR</strong>、<strong>MC</strong>可以通过安装<strong>跨版本插件</strong>（链接见下）来允许<strong>大版本内</strong>的联机兼容</li>
<li><strong>远程协助</strong>一般只有<strong>主机的手柄</strong>输入可以被识别，<strong>其他连接者</strong>只能<strong>使用键盘</strong>，因此大部分软件远程控制只能<strong>主机使用手柄</strong>。</li>
</ul>
</blockquote>
<h2 id="本文视频中的链接汇总"><a class="header" href="#本文视频中的链接汇总"><strong>本文&amp;视频中的链接汇总</strong></a></h2>
<blockquote>
<ul>
<li><strong>Termux</strong>
&gt;<a href="https://github.com/termux/termux-app/wiki/Termux-on-android-5-or-6">github安卓6及以下版本</a>
&gt;<a href="https://github.com/termux">github安卓7及以上版本</a></li>
<li><strong>Mindustry像素工厂</strong></li>
</ul>
<blockquote>
<p><a href="https://github.com/Anuken/Mindustry/releases">Mindustry的Github发行页面</a></p>
</blockquote>
<ul>
<li><strong>Terraria互通服</strong>
&gt;<a href="https://github.com/Pryaxis/TShock/releases/download/v4.5.18/TShock4.5.18_Terraria1.4.3.6.zip">1.4.3.6及以下版本的TShock(github直链)</a></li>
</ul>
<blockquote>
<p><a href="https://store.steampowered.com/app/1281930/tModLoader/">TML（Steam商店地址)(Mod）</a>
<a href="https://github.com/mistzzt/TShock/releases">TShock服务端下载</a>
<a href="https://github.com/Moneylover3246/Crossplay">CrossPlay跨版本插件</a>
<a href="https://www.bbstr.net/r/79/">CrossPlay插件在TrBBS上的页面（旧）</a></p>
</blockquote>
<ul>
<li><strong>Minecraft互通服</strong></li>
</ul>
<blockquote>
<p><a href="https://www.minecraft.net/en-us/download/server/bedrock/">单开基岩版无插件无互通平台</a>
<a href="https://papermc.io/downloads">MCpaper端下载</a>
<a href="https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/">Geyser下载</a>
<a href="https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/">Floodgate下载</a>
<a href="https://www.spigotmc.org/resources/multiverse-core.390/updates">多世界插件Multiverse-Core</a>
<a href="https://www.mcbbs.net/thread-909834-1-1.html">背包隔离插件</a>
<a href="https://www.spigotmc.org/resources/iridium-skyblock-1-13-1-19.62480/">空岛插件</a>
<a href="https://www.spigotmc.org/resources/vault.34315/">空岛需要的前置插件</a>
<a href="https://files.minecraftforge.net/net/minecraftforge/forge/">Forge下载</a>
<a href="https://www.spigotmc.org/resources/viaversion.19254/">跨版本插件</a></p>
</blockquote>
<ul>
<li><strong>生存战争Survivalcraft联机版</strong></li>
</ul>
<blockquote>
<p><a href="https://space.bilibili.com/292546719?spm_id_from=333.337.search-card.all.click">SC联机版作者团队：瓦西里沃尔特</a></p>
</blockquote>
<ul>
<li><strong>红警双端联机</strong></li>
</ul>
<blockquote>
<p><a href="https://www.bilibili.com/video/BV13h411676X">手机运行红警(b站视频教程)</a></p>
</blockquote>
</blockquote>
<h2 id="总结"><a class="header" href="#总结"><strong>总结</strong></a></h2>
<blockquote>
<p><strong>以上方法的最终目标都是打破空间限制实现远程联机，综合来看，原本联机空间越严格的程序在远程联机的方法上操作起来反而更简单。本次教程主要面向新萌，没什么技术力，如果有什么问题可以向我咨询，有什么错误可以指出，就是我不一定在线，回复可能较慢，见谅，感谢您的浏览O(∩_∩)O</strong></p>
</blockquote>
<hr />
<div style="break-before: page; page-break-before: always;"></div><h2 id="手机搭建终端环境内网穿透开服"><a class="header" href="#手机搭建终端环境内网穿透开服"><strong>手机搭建终端环境(内网穿透开服)</strong></a></h2>
<ul>
<li>这是专门为<strong>安卓</strong>手机提供的<strong>开服</strong>方法（<strong>IOS苹果手机</strong>需要先<strong>越狱</strong>然后使用<strong>NewTerm</strong>，虽同样都是终端命令，<strong>但我暂无条件更新相关教程</strong>），主要服务于<strong>内网穿透</strong>，或是异地组网和远程控制(安卓系统本身有软件提供异地组网和远程控制，frpc有内网穿透但是直接运行服务器端不方便，如果你不是为了开服建议使用<strong>原生安卓应用</strong>，除非特殊需要)如内网穿透<a href="https://github.com/mainfunx/frpc_android">frpc on github</a>，<a href="https://gitee.com/skyuning/frpc-Android">frpc on gitee</a>，<strong>pc端请忽略该部分</strong></li>
<li><em>注：本教程内所有安装过程的选择直接回车默认即可</em></li>
</ul>
<blockquote>
<ul>
<li>安装termux</li>
</ul>
<blockquote>
<p>下载地址(github如若打不开，在地址github之前加字母k或https://ghproxy.com/，即https://kgithub...或https://ghproxy.com/https://github...)：</p>
<ul>
<li><a href="https://github.com/termux/termux-app/wiki/Termux-on-android-5-or-6">github安卓6及以下版本</a></li>
<li><a href="https://www.123pan.com/s/Rx6cVv-BYhxd.html">国内云盘直链0.118</a>
<em>注：安卓6及其以下版本建议<strong>不要换源</strong>，请安装完系统后，在系统内换源</em></li>
<li><a href="https://github.com/termux">github安卓7及以上版本</a></li>
<li><a href="">F-Droid的termux网页页面</a></li>
</ul>
</blockquote>
<ul>
<li>Termux基础配置(最左下按钮为tab自动补全)</li>
</ul>
<blockquote>
<ul>
<li><em><strong>换源</strong>命令(安卓7+版本)：</em></li>
</ul>
<pre><code class="language-bash">termux-change-repo
</code></pre>
<p>直接<strong>回车(Enter)<strong>下一步后</strong>空格</strong>选择下方国内源后<strong>一路回车即可</strong>（安卓6及其以下不建议换源，如需则自行查找低版本换源命令）</p>
<ul>
<li>更新包管理工具</li>
</ul>
<pre><code class="language-bash">pkg upgrade &amp;&amp; pkg update
apt upgrade &amp;&amp; apt update
</code></pre>
<ul>
<li>获取手机内部储存</li>
</ul>
<pre><code class="language-bash">termux-setup-storage
</code></pre>
<p>注：Termux的文件都存在手机根目录，没有root无法访问，这些只能通过termux进行读写，使用此命令后，可在home目录下生成一个通往手机主目录的软链接。</p>
</blockquote>
<ul>
<li>基本命令
&gt;```bash</li>
</ul>
<blockquote>
<p>cd 目录 #进入当前目录下的指定目录,其中../为上级，cd ~中~表示当前操作用户目录。
rm -r 目录/文件 #递归删除，参数-r为递归，没有不能删目录
ls -a #列出当前目录下文件，-a参数显示隐藏文件
l #单l命令比ls更加便捷清晰(旧版termux没有，不过安装的系统内可使用)
pwd #获取当前目录地址
mkdir 文件夹名 #在当前目录下新建文件夹（目录）
Ctrl + C #键盘快捷键强制中断当前程序/废弃当前键入命令
#右滑可创建新会话(窗口)|唤起键盘
####解压工具####
apt install unzip #安装
unzip 目标文件名.zip -d 释放目标目录（如无自动创建）</p>
<pre><code></code></pre>
</blockquote>
</blockquote>
<h3 id="安装linux系统-1"><a class="header" href="#安装linux系统-1">安装Linux系统</a></h3>
<p>也可以不装，不过有些应用依赖无法启用(如dotnet)，可能回导致应用无法启动，这时就需要安装系统(proot/chroot)，否则可以直接使用启动命令</p>
<h4 id="android5以上通用方法简单内存充足时推荐-1"><a class="header" href="#android5以上通用方法简单内存充足时推荐-1">Android5以上通用方法（简单，内存充足时推荐）</a></h4>
<blockquote>
<p>+为什么建议该方法：
&gt;+ kali nethunter方法安装termux的linux系统，使用的包都可以支持最新版，不过这也导致了一些不兼容问题
&gt;+ 并且该方法操作简单，无需多余步骤
&gt;+ 缺点在于镜像只有完整版且占用内存较大（约11G），如果内存不足可用下面其他方法占用约1G+</p>
<ul>
<li>Kali版本</li>
</ul>
<blockquote>
<ul>
<li>官方版本（需网络环境，没有则用镜像版）</li>
</ul>
<pre><code class="language-bash">pkg install git wget
wget -O install-nethunter-termux https://offs.ec/2MceZWr #–no-check-certificate
chmod +x install-nethunter-termux
./install-nethunter-termux
</code></pre>
<ul>
<li>使用wget下载时使用-c参数可防止意外中断，对于github相关地址可以在地址前加入&quot;https://ghproxy.com/&quot;代理加速</li>
<li>国内镜像（无需代理）</li>
</ul>
<pre><code class="language-bash">git clone https://gitee.com/zhang-955/clone.git &amp;&amp; cd clone &amp;&amp; cd AutoInstallKali &amp;&amp; chmod +x kalinethunter finaltouchup.sh
./kalinethunter
</code></pre>
<ul>
<li>国外github镜像(完整版同上)</li>
</ul>
<pre><code class="language-bash">curl -LO https://raw.githubusercontent.com/Hax4us/Nethunter-In-Termux/master/kalinethunter
chmod +x kalinethunter
./kalinethunter
</code></pre>
<p>如果下载过程中断需要手动rm（删除）损坏的包，然后重新执行安装脚本(&quot;./开头的是执行脚本命令&quot;)
低版本在通过该系统在安装部分应用时，最新版本可能会出故障</p>
<ul>
<li>获取linux系统权限</li>
</ul>
<pre><code class="language-bash">su
toor
</code></pre>
<p>获取root权限：toor是默认密码，或者kali（Linux的一个用户，Android也有root用户，但不是同一个）
kali内置的工具不做介绍，并且有些需要root才可正常使用</p>
</blockquote>
</blockquote>
<h4 id="android5-6安装系统方法-1"><a class="header" href="#android5-6安装系统方法-1">Android5-6安装系统方法</a></h4>
<blockquote>
<ul>
<li>kali见上</li>
<li>安装其他版本(如果一个失败可换其他的)：</li>
</ul>
<blockquote>
<p>1.脚本一键安装(国光)</p>
<pre><code class="language-bash">pkg install proot git python -y
git clone https://github.com/sqlsec/termux-install-linux
cd termux-install-linux
python termux-linux-install.py
</code></pre>
<p>之后输入数字选择对应操作，安装完后使用下面命令启动</p>
<pre><code class="language-bash">#Ubuntu换成自己安装的系统
cd ~/Termux-Linux/Ubuntu #文件所在目录
./start-ubuntu.sh
</code></pre>
</blockquote>
<p>2.通过atlio安装linux系统</p>
<blockquote>
<ul>
<li>精简版本（没内存推荐）</li>
<li>直链需魔法，建议加代理前缀，方法见上</li>
<li>安装<strong>运行依赖</strong></li>
</ul>
<pre><code class="language-bash">pkg install python curl proot
</code></pre>
<blockquote>
<ul>
<li>CN中文版</li>
</ul>
<pre><code class="language-bash">curl -o $PREFIX/bin/atilo https://raw.githubusercontent.com/YadominJinta/atilo/master/CN/atilo_cn &amp;&amp; chmod +x $PREFIX/bin/atilo
</code></pre>
<ul>
<li>EN英文版(多几个镜像)</li>
</ul>
<pre><code class="language-bash">curl -o $PREFIX/bin/atilo https://raw.githubusercontent.com/YadominJinta/atilo/master/atilo &amp;&amp; chmod +x $PREFIX/bin/atilo
</code></pre>
<p>如果提示缺少插件则输入(先更新一次pip，否则不兼容包存在会导致更新失败)</p>
<pre><code class="language-bash">pip install --upgrade pip -i http://pypi.douban.com/simple --trusted-host pypi.douban.com &amp;&amp; pip install 'requests' tqdm 'prettytable' bs4  -i http://pypi.douban.com/simple --trusted-host pypi.douban.com
</code></pre>
<p>安装&amp;启动命令：</p>
</blockquote>
<pre><code class="language-bash">atilo images #列出可用镜像
atilo pull ubuntu #下载&amp;安装ubuntu镜像(自选)
atilo run ubuntu #ubuntu换成安装自己的系统
</code></pre>
<ul>
<li>如果启动过程中提示需要代理而且你又没有代理，可以尝试修改DNS或者换个时间段再试试，一般国内傍晚就连不上了</li>
<li>Github方法（可能需要网络环境）:
&gt;```bash</li>
</ul>
<blockquote>
<p>pkg in git
git clone https://github.com/jerrychen110/atilo
chmod +x ~/atilo
./atilo ubuntu #启动命令</p>
<pre><code>ubuntu换成自己想要的系统，不带参数可以查看命令帮助；启动报错proot可以试试其他方法或者更换网络环境再删除重下系统（一般下载系统镜像不会太快，太快就可能是网络故障）
</code></pre>
</blockquote>
</blockquote>
<p>安装好系统后下面参考linux操作方法开服，不过termux要下载arm64的包，其他设备的linux系统架构自行查看并下载使用对应包</p>
<p>如果apt seach也找不到对应的包可能是你没更新源</p>
</blockquote>
<h4 id="android7安装系统方法-1"><a class="header" href="#android7安装系统方法-1">Android7&amp;+安装系统方法</a></h4>
<blockquote>
<ul>
<li>脚本安装（功能丰富，推荐）
&gt;```bash</li>
</ul>
<blockquote>
<p>bash -c &quot;$(curl -Lv gitee.com/mo2/linux/raw/master/debian.sh)&quot;</p>
<pre><code>不重启termux(长按more-&gt;kill 所有会话-&gt;重新启动termux)使用debian-i进入管理面板或startvnc命令进入系统

重启后输入debian即可进入系统
</code></pre>
</blockquote>
<ul>
<li>手动安装（占用少，网络环境要求较高，没魔法国内够呛）
&gt;```bash</li>
</ul>
<blockquote>
<p>pkg install proot-distro
proot-distro install ubuntu
proot-distro login ubuntu #进入系统命令</p>
<pre><code>ubuntu可换成自己喜欢的系统(proot-distro list查看可用镜像)，建议先proot-distro list查看支持系统，有些系统不支持部分手机架构，请阅读其简介下载合适的
</code></pre>
</blockquote>
</blockquote>
<h4 id="termux系统常见问题-1"><a class="header" href="#termux系统常见问题-1">termux系统常见问题</a></h4>
<blockquote>
<ul>
<li>旧版termux安装的系统没有内置的互通存储目录，通过创建软链接连接termux储存目录时mv 文件 ../后回到../没有文件，可以去系统的/data/data/com.termux 目录查看，建议直接mv至~(用户目录)</li>
<li><strong>注意：本文往后以Debian系系统(Debian、Ubuntu、Kali等)为例，其他系统包管理器命令自行查找（如ArchLinux的pacman）</strong></li>
<li>apt添加储存库：
&gt;```bash</li>
</ul>
<blockquote>
<p>apt-get install software-properties-common
add-apt-repository ppa:openjdk-r/ppa #jdk8示例</p>
<pre><code></code></pre>
</blockquote>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="各种游戏联机方法示例-1"><a class="header" href="#各种游戏联机方法示例-1">各种游戏联机方法示例</a></h2>
<p>只列出部分游戏，主要看自己判断；支持ip直连（内网穿透或公网主机）的也都支持异地组网</p>
<ul>
<li>生存创造类</li>
</ul>
<blockquote>
<p>内+异：MC、TR、饥荒
远程协助：DR2C</p>
</blockquote>
<ul>
<li>经营类</li>
</ul>
<blockquote>
<p>内+异：星露谷</p>
</blockquote>
<ul>
<li>策略类</li>
</ul>
<blockquote>
<p>内+异：铁锈
异：红警，钢4</p>
</blockquote>
<ul>
<li>竞技类</li>
</ul>
<blockquote>
<p>内+异+远：武装原型
异：使命全系列、鸭子游戏、回旋标</p>
</blockquote>
<h2 id="类型一提供ip直连的程序通过中间服务器实现远程联机-1"><a class="header" href="#类型一提供ip直连的程序通过中间服务器实现远程联机-1"><strong>类型一</strong>：提供<strong>IP直连</strong>的程序（通过中间服务器实现远程联机）</a></h2>
<p><strong>判断方法</strong>：允许通过输入<strong>字符串类型的值</strong>来连接服务器（如同<strong>浏览器的地址栏</strong>），该类型程序一般允许用户自己创建连接服务器或者直接连接，典型的如：我的世界(Minecraft)、泰拉瑞亚(Terraria)、星露谷物语(Stardew Valley)、铁锈战争(Rusted Warfare)、生存战争(Survivalcraft)联机版等</p>
<hr />
<ol>
<li>
<h3 id="1部署本地服务端必需-准备-1"><a class="header" href="#1部署本地服务端必需-准备-1"><strong>1.部署本地服务端(必需-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>启动</strong>对应的<strong>服务端程序</strong>（可能需要填入部分配置信息）并等待部署完成即可，有的软件不自带服务端的启动程序，或者其不能够满足服务器的需求，因此需要下载对应的服务端：</p>
<ul>
<li>
<h4 id="我的世界minecraft-1"><a class="header" href="#我的世界minecraft-1">我的世界Minecraft</a></h4>
</li>
</ul>
<h5 id="安装服务端-1"><a class="header" href="#安装服务端-1">安装服务端</a></h5>
<p><em>无论何种平台大概流程都是[配置运行环境]--&gt;运行服务器端--&gt;公开服务器端口</em></p>
<ul>
<li>Java端服务器</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.minecraft.net/zh-hans/download/server">Minecraft官方服务器端（纯原版）</a></li>
<li><a href="https://papermc.io/downloads">Paper服务器端（插件+优化）</a></li>
<li><a href="https://hub.spigotmc.org/jenkins/job/BuildTools/">spigot服务器端（插件）</a></li>
<li><a href="https://files.minecraftforge.net/net/minecraftforge/forge/">Forge安装服务器（mod）</a>（下载时若不能跳过广告，一可在下载按钮右键复制链接，单独粘贴链接中URL部分，或者到广告界面查看网页源代码，找到skip附近的链接地址并单独搜索即可）</li>
<li><a href="https://spongepowered.org/downloads/">Forge + Sponge（插件+mod - SpongeMod支持版本少）</a></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>关于Java版开服：</li>
</ul>
<blockquote>
<ul>
<li><a href="https://www.oracle.com/java/technologies/downloads/">Java各大平台版本地址</a></li>
<li>OpenJDK on Linux：
&gt;```bash</li>
</ul>
<blockquote>
<p>sudo apt install openjdk-17 #版本与服务端挂钩1.16.5&amp;-请安装使用jdk8</p>
<pre><code></code></pre>
</blockquote>
<p>选择合适服务端需求版本的java后下载服务器端</p>
<p>如果openjdk不能用去官网下对应版本的javajdk/jre，无系统archarm64/arm64，有则按照系统下载对应包</p>
<p>Linux通过终端命令行运行；Windows创建<strong>bat文件</strong>运行服务端</p>
<pre><code class="language-bash">   java -Xms1024M -Xms2048M -jar 服务器端名称.jar
</code></pre>
<ul>
<li>或java -jar 服务端名称.jar自动分配内存。</li>
<li>其中<strong>Xms</strong>为<strong>最小</strong>内存，<strong>Xmx</strong>为<strong>最大</strong>内存，单位可以为M也可以为G，也可以默认自适应。</li>
<li>服务端名称是下载使用哪个服务端就填哪个服务端的名称，<strong>forge</strong>要<strong>先双击安装</strong>程序(需java运行环境)运行并安装服务器端</li>
<li>启动带GUI的服务端可以在后面加 <strong>nogui</strong>来取消运行时启动独立窗口</li>
<li>java是使用默认环境变量的java，当1.16.5&amp;-版本服务器运行时可能不兼容新版，可以在计算机中安装多个版本的java并使用<strong>绝对路径</strong>来运行服务器端如下（Linux用./同理）：</li>
</ul>
<pre><code class="language-bash">&quot;C:\Program Files\Java\jre1.8.0_351\bin\java&quot; -Xms1G -Xmx2G -jar paperc.jar nogui
</code></pre>
<ul>
<li>第一次运行需要先改<strong>eula.txt</strong>文件中eula=后面的false改为<strong>true</strong>即同意上述协议，修改完成后保存再次启动(Linux进入vim默认命令模式后按i进入插入模式开始写入，按ESC切换为命令模式，输入:wq保存并退出，:q!不保存强制退出)</li>
</ul>
<pre><code class="language-bash">sudo apt install vim #linux安装编辑器，已安装跳过
vi eula.txt
</code></pre>
<p>之后再次启动会下载所需文件，耐心等待，若下载出现错误可以开<strong>网络工具</strong>或者在<strong>log报错文件</strong>中找到报错的<strong>文件地址手动下载</strong>，手动下载再失败可以<strong>复制地址到网盘的P2P下载器</strong>下载。</p>
<ul>
<li><strong>Stop</strong>停止并保存服务器，注该开服方法不<strong>适用于</strong>国内版MC，且<strong>国内版</strong>MC与<strong>国际版</strong>并<strong>不能互通</strong>。</li>
</ul>
</blockquote>
<h5 id="mc开服成功后相关内容-1"><a class="header" href="#mc开服成功后相关内容-1">MC开服成功后相关内容</a></h5>
<ul>
<li>配置文件</li>
</ul>
<blockquote>
<p>位置：服务器目录下Serverpropreity</p>
<ul>
<li>出生点保护：spawn-protection=16 #半径</li>
<li>启用命令方块：enable-command-block=false #默认关闭，故有些地图无法使用，启用即可正常</li>
<li><a href="https://minecraft.fandom.com/zh/wiki/Server.properties">更多请跳转至wiki</a></li>
</ul>
</blockquote>
<ul>
<li>基本命令</li>
</ul>
<blockquote>
<p>控制台内无&quot;/&quot;，游戏内需加&quot;/&quot;</p>
<pre><code class="language-bash">op 玩家名 #使指定玩家获取权限
deop 玩家名 #作用与op相反
ban 玩家名 #将指定玩家踢出服务器（封禁）
</code></pre>
</blockquote>
<h5 id="java服基础上实现与be基岩互通-1"><a class="header" href="#java服基础上实现与be基岩互通-1">Java服基础上实现与BE(基岩)互通</a></h5>
<blockquote>
<p>进不去下载页面试试魔法或代理或修改dns</p>
<p>以下链接为构建页面，选择一个最新构建的分支下载需对应需要的jar</p>
<ul>
<li><a href="https://ci.opencollab.dev//job/GeyserMC/job/Geyser/job/master/">Geyser跨平台翻译组件</a></li>
<li><a href="https://ci.opencollab.dev/job/GeyserMC/job/Floodgate/job/master/">Floodgate基岩版离线服组件</a></li>
<li><a href="https://www.spigotmc.org/resources/viaversion.19254/">跨版本插件</a></li>
<li><a href="https://geyser.superiormc.cn/user-guide/da-jian">关于Geyser</a>:</li>
</ul>
<blockquote>
<p>Geyser-Fabric安装在mods文件夹
&gt;服务器要求使用任何 客户端Mod 都会导致基岩版玩家无法进入服务器，
Geyser-Spigot作为插件安装在plugins文件夹，服务器内/reload /reload confirm可以重载服务器插件
Geyser-Velocity独立端，单独窗口运行</p>
<ul>
<li>quote：如果你使用的服务端核心并不支持 Java 16，请在 启动参数 添加 -DPaper.ignoreJavaVersion=true 来使得你的服务端能够正常运行。</li>
<li>如果你的服务端核心实在无法在 Java 16 上运行，请考虑使用 独立版。</li>
<li>手机版开互通服不建议使用独立端，需要较高性能</li>
<li>一些旧版本的 Geyser 只和 Floodgate 1.0 适配而不支持 Floodgate 2.0，所以建议最新版</li>
</ul>
</blockquote>
<ul>
<li>
<p><a href="https://geyser.superiormc.cn/floodgate-wiki/da-jian-he-yong-fa">关于Floodgate</a>:
&gt;下载并放置在服务端目录下plugins文件夹内
&gt;+ <em>quote：你可以在各个子服上安装 Floodgate (但 Geyser 真的没必要) 来增强玩家的皮肤显示功能和在子服上使用 Floodgate API。如果你要这么做，你 必须 保证你将代理服务端内 Floodgate 文件夹内的 key.pem 文件放置到了 所有子服的 Floodgate 文件夹内的相同位置，否则，基岩版客户端无法加入服务器。</em>
&gt;+ 你只需在使用独立版上进行此步骤：复制 Floodgate 配置所在的目录下的 key.pem 文件到 Geyser独立版 的文件夹内。不要尝试将这个文件分享给其他人！这个密钥文件允许基岩版账号绕过 Java 版身份验证，如果有人拿到了它，他们可能会对您的服务器造成严重破坏
&gt;+ 在你的 Floodgate 配置中，将 username-prefix 设置为你需要的前缀 - 你可以设置为 &quot;&quot; 以关闭基岩版前缀功能。
&gt;&gt; <em>在一些旧版本的 Paper 服务器（或者 Paper 的一些分支），你或许需要关闭你的服务器并删除你的 服务端 jar 文件同目录下的的usercache.json 文件以避免出现你的老的 Floodgate 玩家的前缀没有更新的问题。</em></p>
</li>
<li>
<p>配置完Geyser[&amp;Floodgate]后，服务端就配置完成了</p>
</li>
</ul>
</blockquote>
<h5 id="仅基岩版相关-1"><a class="header" href="#仅基岩版相关-1">仅基岩版相关</a></h5>
<blockquote>
<p>适合只开手机服务器的用户</p>
<ul>
<li><a href="https://www.minecraft.net/en-us/download/server/bedrock/">单基岩版官方服务端无插件互通官网</a>
在termux中的启动命令</li>
</ul>
<pre><code class="language-bash">####下载并解压服务端文件####
wget https://minecraft.azureedge.net/bin-linux/bedrock-server-1.18.12.01.zip #换成自己版本
unzip bedrock-server-1.18.12.01.zip -C minecraftbeserver/ #目录换成你自己想要的好记的名
####运行命令####
LD_LIBRARY_PATH=. ./bedrock_server
</code></pre>
<ul>
<li>修改配置文件同上，如：player-idle-timeout=0 #挂机踢出时间，0为不因挂机超时踢出玩家</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="泰拉瑞亚terraria-1"><a class="header" href="#泰拉瑞亚terraria-1">泰拉瑞亚Terraria</a></h4>
</li>
</ul>
<blockquote>
<p>1.4以下版本win用户可不安装新版dotnet，建议先启动试试不能启动再安装运行环境。另外：手机termux开tshock的服必须在proot/chroot环境中，需要安装一个linux系统</p>
<ul>
<li><a href="https://dotnet.microsoft.com/zh-cn/download/">通过安装dotnet启动Win&amp;Linux：dotnet官网链接</a></li>
</ul>
<blockquote>
<p>Windows安装dotnet后双击服务端程序直接运行即可</p>
<p>Windows游戏存档等目录：资源管理器---&gt;左侧：我的文档/My Games/Terraria/
+Linux安装dotnet命令(termux旧版使用mono)：</p>
<pre><code class="language-bash">sudo apt install dotnet-sdk-6
</code></pre>
</blockquote>
<ul>
<li>Linux或使用脚本安装
&gt;```bash</li>
</ul>
<blockquote>
<p>wget https://dot.net/v1/dotnet-install.sh -Oc dotnet-install.sh
sudo chmod +x ./dotnet-install.sh
./dotnet-install.sh  --channel 6.0 #可修改版本，推荐6.0
dotnet TerrariaServer.exe #运行服务器</p>
<pre><code></code></pre>
</blockquote>
<ul>
<li>Linux或其他平台通过mono启动
&gt;注：使用mono最大支持<a href="https://github.com/Pryaxis/TShock/releases/download/v4.5.18/TShock4.5.18_Terraria1.4.3.6.zip">1.4.3.6及以下版本的TShock(github直链)</a> ，<strong>Android6&amp;-我目前没有开</strong>1.4.3.6TShock的方法，<strong>新版TShock需要dotnet</strong>
&gt;<a href="https://www.mono-project.com/download/">mono官网</a>
&gt;```bash</li>
</ul>
<blockquote>
<p>apt install mono-complete</p>
<pre><code>*TerariaServer.exe服务端游戏本体目录下自带，linux也是先下载游戏本体，进入游戏目录运行服务端文件*

</code></pre>
</blockquote>
<ul>
<li>Linux原版服务器：
&gt;```bash</li>
</ul>
<blockquote>
<p>#64位操作系统先执行以下命令
sudo add-apt-repository multiverse
sudo dpkg --add-architecture i386
sudo apt update
sudo apt install lib32gcc1
#下面安装steamcmd，steam也可以，在游戏目录启动游戏即可
sudo apt install steamcmd
./usr/games/steamcmd #sudo bash ./...
login + 用户名 #登录帐号
app_update 105600 #安装terraria
cd ~/Steam/steamapps/common/Terraria
./TerrariaServer.bin.x86_64 #运行服务端</p>
<pre><code>Linux游戏存档等路径：~/.local/share/Terraria/

</code></pre>
</blockquote>
<ul>
<li><a href="https://github.com/Pryaxis/TShock/releases">TShock（相比原版可以装插件）</a>
&gt;去官网复制下载链接，然后通过wget下载tshock的zip文件，之后使用unzip工具解压
&gt;```</li>
</ul>
<blockquote>
<p>wget -c #目标地址，-c是意外中断后再次下载能接上
sudo apt install unzip
unzip TShock*.zip -d tshock 
cd tshock
tar -xf TShock*.tar #解压目标文件，-C 加已经创建好的目录地址
mono TerrariaServer.exe #启动命令</p>
<pre><code>*如果提示开始下载dotnet之后失败，则先自己安装dotnet，见上*

+ 开服后看情况保存超级管理员代码，只有第一次显示，没记下来如果需要可以删除tshock.sqlite&amp;auth.lck文件然后重启，或者其他方法见下
+ TShock安装插件：将插件名.dll放在ServerPlugins下，重启后TShock会自动生成相应的配置文件
+ 版本差异时可以使用插件解决（如不同平台最新版不同时，但只能跨一个大版本内的子版本）[CrossPlay跨版本插件](https://github.com/Moneylover3246/Crossplay)
+ 通过控制台移动用户组至admin组获得管理权限（常用），或是游戏内输入/auth [authcode]获取超管权限，也可移动用户组至superadmin(超级管理员)，但是**不建议**用超管游玩，**超级管理的角色数据不会被保存**
+ config.json配置文件在tshock目录下，如出生点保护范围之类，可以进行查阅&amp;修改，之后重启更新服务器，[TShock官方帮助文档](https://ikebukuro.tshock.co/)；[相关链接推荐csdn1](https://blog.csdn.net/shuishen49/article/details/54743316)；[相关链接推荐csdn2]([https://blog.csdn.net/junknow/article/details/128260828)
+ TShock基本命令(控制台内无&quot;/&quot;，游戏内需加&quot;/&quot;)：
&gt;+ 游戏内：
&gt;/register 密码
&gt;
&gt;/login [password]
&gt;
&gt;/auth [authcode]
&gt;
&gt;+ 控制台：
&gt;```bash
&gt; ban 玩家名
&gt; help [页数]
&gt;```
</code></pre>
</blockquote>
<ul>
<li><a href="https://store.steampowered.com/app/1281930/tModLoader/">TML（Steam商店地址)(可装Mod）</a>
&gt;```bash</li>
</ul>
<blockquote>
<p>#还是terraria的目录下
#steam更新命令：app_update &lt;应用ID&gt; [-beta &lt;测试名称&gt;] [-betapassword &lt;密码&gt;] [validate] 版本号自行查看，validate可以不成功时再加
app_update 1281930 +tml版本号 validate
./start-tModLoaderServer.sh</p>
<pre><code></code></pre>
</blockquote>
<ul>
<li><strong>exit</strong>停止并保存服务器，该开服方法不<strong>适用于</strong>国内版TR，且<strong>国内版</strong>TR与<strong>国际版</strong>并<strong>不能互通</strong>。</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="生存战争survivalcraft联机版-1"><a class="header" href="#生存战争survivalcraft联机版-1">生存战争Survivalcraft联机版</a></h4>
</li>
</ul>
<blockquote>
<p><strong>作者团队</strong>及其<strong>教程地址</strong>：<a href="https://space.bilibili.com/292546719?spm_id_from=333.337.search-card.all.click">瓦西里沃尔特 bilibili</a></p>
</blockquote>
<ul>
<li>
<h4 id="vue网站基本命令-1"><a class="header" href="#vue网站基本命令-1">Vue网站基本命令</a></h4>
</li>
</ul>
<p>需先安装<strong>Node.js</strong>
&gt;
&gt;<code>bash npm install vue-cli -g 安装vue-cli vue init webpack my-project  初始化项目 npm install  安装项目依赖 npm run build 生成上线目录部署 nmp run dev 本地测试服务器 &gt;</code></p>
<blockquote>
<p><strong>Ctrl+C</strong>关闭服务器</p>
</blockquote>
<ul>
<li>
<h4 id="hexo网站基本命令-1"><a class="header" href="#hexo网站基本命令-1">Hexo网站基本命令</a></h4>
</li>
</ul>
<p>需先安装<strong>Node.js</strong>和<strong>Git</strong>
&gt;<code>bash npm install hexo-cli -g 安装hexo-cli hexo init 文件夹名 cd进去后npm install安装npm即完成 hexo new &quot;文章名&quot; 新文章 hexo new page &quot;页面名&quot; 生成新页面 hexo s 本地预览 hexo g 上传暂存区 hexo d 上传到Github hexo server -p 端口号 修改本地部署的端口 &gt;</code></p>
<blockquote>
<p><strong>Ctrl+C</strong>关闭服务器</p>
</blockquote>
</blockquote>
<ol start="2">
<li>
<h3 id="2监听程序端口可跳过-准备-1"><a class="header" href="#2监听程序端口可跳过-准备-1"><strong>2.监听程序端口(可跳过-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p>这里也给出了一些常见的应用端口，如果包含在内，或者已知，请跳过此步骤</p>
<p><em><strong>先启动游戏服务器或创建局域网房间后才能看到其端口和协议类型，下面列出常见软件的协议类型及其端口</strong></em></p>
<ul>
<li><strong>网站默认http/https</strong>(vue：<strong>8080</strong>；PHPstudy：<strong>80</strong>；Hexo：<strong>4000</strong>；mdbook；<strong>3000</strong>；......)</li>
<li><strong>泰拉瑞亚Terraria自带</strong>或<strong>TShock</strong>：TCP<strong>7777</strong></li>
<li><strong>我的世界Minecraft：Java</strong>：TCP<strong>25565</strong>；内置服务端<strong>随机</strong>；<strong>BE基岩版</strong>：UDP<strong>19132</strong>（互通服两个都要映射）</li>
<li><strong>铁锈战争Rusted Warfare</strong>：TCP<strong>5132</strong></li>
<li><strong>生存战争Survivalcraft联机版</strong>：UDP<strong>28887</strong></li>
<li><strong>星露谷物语Stardew Valley</strong>：UDP<strong>24642</strong></li>
<li><strong>像素工厂Mindustry</strong>：<strong>TCP+UDP双协议映射&amp;相同对外端口</strong></li>
<li><strong>饥荒</strong>：UDP<strong>地上10999&amp;地下10998</strong></li>
<li>......（有的游戏服务器需要<strong>两条隧道</strong>才能正常运行，例如：<strong>未转变者Unturned</strong>(<strong>quit</strong>退出并保存服务器)、MC互通服等）</li>
</ul>
<p><em><strong>如果出现报错显示端口被占用相关问题，可以修改配置文件改变游戏默认的端口号，但有的程序不提供配置文件修改端口号，那也可以在下面操作找到占用该端口号的程序并将它结束掉；linux系统结束程序在下面</strong></em></p>
<p><em><strong>一般游戏端口及其协议类型可以搜到，或者界面会告诉你，如果没有再进行下面的步骤</strong></em></p>
<hr />
<p><img src="https://s11.ax1x.com/2023/08/15/pPM5759.png" alt="图片加载失败了，不过不影响" /></p>
<ul>
<li>
<h4 id="windows操作系统-1"><a class="header" href="#windows操作系统-1"><strong>Windows操作系统</strong></a></h4>
</li>
</ul>
<blockquote>
<ol>
<li><strong>启动资源监视器</strong>
&gt;</li>
</ol>
<blockquote>
<ul>
<li>方法一：直接运行，按下<strong>Win+R</strong>，输入以下内容
<code>C:\Windows\System32\perfmon.exe</code></li>
<li>方法二：<strong>右键</strong>windows菜单栏 ——&gt; 选择<strong>任务管理器</strong> ——&gt; 选择<strong>性能</strong>一栏 ——&gt; 下面单击“<strong>打开资源监视器</strong>”</li>
</ul>
</blockquote>
<ol start="2">
<li><strong>监听程序端口</strong></li>
</ol>
<p><img src="https://s11.ax1x.com/2023/08/15/pPM5xbD.png" alt="图片加载失败了，看视频吧，或者复制图片地址到浏览器地址栏里手动浏览" /></p>
<blockquote>
<p>在菜单栏<strong>网络</strong>下的页面划到<strong>监听端口</strong>一栏
我们需要的是目标游戏的<strong>传输协议类型</strong>和它的<strong>端口号</strong>
这里以<strong>TShock</strong>为例，它的<strong>默认端口号</strong>为<strong>7777</strong>，<strong>协议类型</strong>是<strong>TCP</strong>
一般<strong>游戏</strong>的协议为<strong>TCP</strong>或<strong>UDP</strong>，要根据协议类型选择**合适的映射（内网穿透）**工具，因为有的映射工具不支持UDP，还有的不支持TCP、http。</p>
</blockquote>
</blockquote>
<ul>
<li>
<h4 id="linux操作系统-1"><a class="header" href="#linux操作系统-1"><strong>Linux操作系统</strong></a></h4>
</li>
</ul>
<blockquote>
<p>打开<strong>终端</strong>，输入
<code>netstat -a</code></p>
<ul>
<li>参数含义：-a 显示所有；-n 以ip形式显示当前建立的有效连接和端口；-u 显示UDP协议；-t 显示TCP协议；-p 显示对应PID与程序名</li>
<li>如果该方法不可用，可尝试安装nmap扫描本地端口</li>
</ul>
</blockquote>
</blockquote>
<ol start="3">
<li>
<h3 id="3内网穿透方式通用-实现-1"><a class="header" href="#3内网穿透方式通用-实现-1"><strong>3.内网穿透方式(通用-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>前言：<strong>这里主要介绍基于</strong>第三方免费平台</strong>的内网穿透，<em><strong>倘若</strong>自己部署内网穿透，需要一份有固定公网ip的服务器和一个已经备案的域名，这里不讲，想要部署的可以自己搜索相关教程，还是挺全面的。</em></p>
<p><img src="https://s11.ax1x.com/2023/08/15/pPMo8fA.png" alt="内网穿透流程图，可能不正确" /></p>
<p><strong>我在这里列出常见的平台</strong>：（以下为<strong>普通用户配置:不购买套餐</strong>）</p>
<ul>
<li>
<h4 id="常见平台1mbps128kb18mb-1"><a class="header" href="#常见平台1mbps128kb18mb-1">常见平台（1M(bps)=128KB=1/8MB）</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://hsk.oray.com/"><strong>花生壳</strong></a>：极低的学习成本；<strong>实名1M/s</strong>每月1G且<strong>无Http</strong>和<strong>UDP</strong>，固定域名</li>
<li><a href="https://www.cpolar.com/"><strong>cpolar</strong></a>：学习成本低；无需实名；无限流量；<strong>动态域名</strong>且<strong>无</strong>UDP；速度较低；<strong>http</strong>协议提供<strong>免费动态域名</strong></li>
<li><a href="https://www.fgnwct.com/"><strong>飞鸽</strong></a>：学习成本低；<strong>0.5M/s</strong>，签到给流量；<strong>http</strong>协议提供<strong>免费域名</strong>；<strong>免费两条</strong>隧道但<strong>http只能一条</strong></li>
<li><a href="https://www.mefrp.com/"><strong>MirrorEdge Frp镜缘(莱云)映射</strong></a>：学习成本一般；<strong>1元实名刷脸</strong>；速度限制取决于所选节点，隧道固定域名</li>
<li><a href="https://www.openfrp.net"><strong>OpenFrp 内网穿透</strong></a>：学习成本低(带GUI启动器和樱花相似)免费，签到领流量；<strong>部分节点</strong>无需实名；速度<strong>限制</strong>12M/s(速度取决于所选节点与访客距离)；固定域名；<strong>http</strong>协议需要<strong>绑定自己的域名</strong></li>
<li><a href="https://natapp.cn/"><strong>NATAPP</strong></a>：学习成本一般；<strong>动态域名</strong>；<strong>实名</strong>；1Mbps；<strong>http</strong>协议提供<strong>免费域名</strong></li>
<li><a href="https://xiaomy.net"><strong>网云穿</strong></a>：学习成本低；<strong>实名</strong>；每<strong>月1G</strong>；前7天3M/s会员，后面<strong>锁TCP</strong>且<strong>1M/s</strong>，固定域名</li>
<li><a href="https://ngrok.com/"><strong>ngrok</strong></a>：学习成本一般；无需实名；只给<strong>一条免费隧道</strong>，离得近的节点延迟较低；http会<strong>自动换https</strong>协议（相当于<strong>不支持http</strong>）</li>
<li><a href="http://www.nat123.com/">Nat123</a>：学习成本一般；<strong>无需实名</strong>但<strong>支付实名</strong>；<strong>新</strong>账号只给<strong>5个N币</strong>；<strong>&lt;1M/s</strong>；支持<strong>自定二级域名</strong>；仅支持<strong>http协议</strong></li>
<li><a href="http://www.ipyingshe.com/">闪库</a>：1M；<strong>仅支持Http</strong>，<strong>随机固定</strong>域名；未来可能实名
<strong>（以下是其他我没用过的内网穿透）</strong></li>
<li><a href="https://www.natfrp.com"><strong>樱花</strong></a>：学习成本低；<strong>1毛付费刷脸实名必须18+</strong>；新5/老10M/s速度限制，固定域名，进不去网上有备用路线</li>
<li><a href="https://github.com/fatedier/frp"><strong>frp</strong></a>：有较高的学习成本，是自己部署内网穿透的开源工具，但需要<strong>有条件（公网主机）</strong>，可扩展性强，不少内网穿透就是基于它的(例如莱云、Locyan、凿洞)</li>
<li><a href="https://www.ngrok.cc/">Sunny-Ngrok</a>:1块付费刷脸实名；<em>钉钉内网穿透</em>:早已停止服务；<a href="https://flynat.51miaole.com/">蜻蜓</a>、<a href="http://www.youtusoft.com/">网络通</a>无法注册；<a href="https://www.locyanfrp.cn/">LoCyan Frp</a>:之前节点不可用，最近Q群审核使用；<a href="https://frp.wiki/">凿洞Free Frp</a>:我不会用，它老报错；<em>U-anywhere万由云</em>；<em>QuickConnect</em>；<em>哲西云</em>:加入花生壳了；<em>nat123</em>；<em>Tinc</em></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="内网穿透操作流程-1"><a class="header" href="#内网穿透操作流程-1"><strong>内网穿透操作流程</strong></a></h4>
</li>
<li>
<p><strong>网页+平台类型</strong></p>
</li>
</ul>
<blockquote>
<ol>
<li>注册账号填写并完善相关信息(如绑定验证账号、实名等，没有则跳过)，然后后再进入<strong>控制面板</strong></li>
<li>创建<strong>隧道</strong>（有的在本地创建隧道，形式不一，但需要的信息基本一样），填入相关信息：隧道名、<strong>协议类型</strong>、<strong>本地地址(127.0.0.1或局域网地址)<strong>以及</strong>本地端口</strong>（上面查的）。（有的支持自定义子域名或绑定自己的域名，也有的支持一定限度内自定义对外端口号，也有的允许你自选节点，可以根据配置需要选择）</li>
<li>云端部署好后开始<strong>部署本地</strong>，先<strong>下载</strong>对应平台的<strong>服务端程序</strong>，<strong>有的</strong>需要将其<strong>与个人账号绑定</strong>，一般是通过个人账户的Token（或口令、密钥等）进行绑定；</li>
<li>复制云端<strong>隧道创建后给的Token</strong>与本地映射服务端进行<strong>绑定</strong>，或者给予窗口选择自己的隧道并<strong>启动</strong>，启动后给出的<strong>地址</strong>（一般为：地址:端口号；像http类型只有地址）就是他人访问的所用到的信息了。</li>
</ol>
</blockquote>
<ul>
<li><strong>应用平台类型</strong>（相对简单）</li>
</ul>
<blockquote>
<ol>
<li><strong>注册</strong>账号填写并完善相关信息</li>
<li>创建隧道填入：隧道名、<strong>协议类型</strong>、<strong>本地地址</strong>、<strong>本地端口</strong>、[自选节点或宽带套餐]等信息</li>
<li><strong>启动</strong>隧道，即可获取我们所需的地址（一般为：<strong>地址:端口号</strong>；像http类型只有地址）</li>
</ol>
</blockquote>
<ul>
<li><strong>访客使用地址教程</strong></li>
</ul>
<blockquote>
<p><strong>网页</strong>：访客将给定的地址直接<strong>粘贴</strong>到浏览器的<strong>地址栏</strong>访问；<strong>主机</strong>可以用<strong>localhost</strong>或<strong>127.0.0.1</strong>访问
<strong>游戏</strong>：访客选择<strong>多人游戏</strong>并选择<strong>加入</strong>相关，<strong>填入给定的地址</strong>加入即可；<strong>主机</strong>可以用<strong>localhost</strong>或<strong>127.0.0.1</strong>访问。</p>
<ul>
<li>只给一个填写IP地址的输入框，则填写 <strong>地址:端口号</strong> 的形式（如：MCJava版）</li>
<li>同时给出IP地址和端口号地址的，各填入各所需的地址和端口，<strong>英文冒号直接省去</strong>（如：Terraria、MCBE版）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="图文示例-3"><a class="header" href="#图文示例-3"><strong>图文示例</strong></a></h4>
</li>
</ul>
<blockquote>
<p>此处以Terraria的<strong>TShock服务端</strong>和<strong>Cpolar和飞鸽内网穿透</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：</p>
<ul>
<li><strong>Cpolar 快捷方法</strong>：</li>
</ul>
<blockquote>
<p>这是Cpolar较为便捷的操作方式
<img src="https://s11.ax1x.com/2023/08/15/pPMoDYj.png" alt="Cpolar方法一" /></p>
</blockquote>
<ul>
<li><strong>通用方法-以Cpolar和飞鸽为例</strong>：
<blockquote>
<p>①②和Cpolar快捷方法的一样，创建后隧道管理界面会有相应隧道的访问地址
<img src="https://s11.ax1x.com/2023/08/15/pPMo6lq.png" alt="Cpolar方法二" />
启动后访问地址在隧道管理界面可见
<img src="https://s11.ax1x.com/2023/08/15/pPMogXV.png" alt="飞鸽方法" /> </p>
</blockquote>
</li>
</ul>
</blockquote>
</blockquote>
<ol start="4">
<li>
<h3 id="4ipv6公网方式条件-实现-1"><a class="header" href="#4ipv6公网方式条件-实现-1"><strong>4.IPv6公网方式(条件-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<ul>
<li><strong>前言：理想状态下</strong>，IPv6延迟低，操作简单，免费且无需账号、认证等，不过前提是你的<strong>网络运营商向你提供IPv6服务</strong>，且你的电脑<strong>能够正常识别和使用</strong>，详细判断是否可用和配置教程可见相关教程<a href="https://www.bilibili.com/video/BV1Lb4y1o7SF">【mc开服】教你白嫖运营商公网ipv6跟好兄弟联机】</a></li>
<li>主机启动服务器后，访问端以 <strong>[对方的IPv6地址]:端口号</strong> 的格式直接连接即可</li>
<li>注：这里没有条件不做演示，可移步到上方链接观看推荐视频学习。</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="类型二提供局域网的程序通过异地组网实现远程联机-1"><a class="header" href="#类型二提供局域网的程序通过异地组网实现远程联机-1"><strong>类型二：提供局域网的程序</strong>（通过异地组网实现远程联机）</a></h2>
<p><strong>判断方法</strong>：提供IP直连的基本都支持局域网，因为你可以用路<strong>由器分配的地址</strong>和<strong>对应程序的端口</strong>实现<strong>内网中不同设备</strong>的<strong>信息交换</strong>，只是可能有些程序不提供现成的独立页面和自动搜索；也有一些程序仅支持使用局域网联机不开放IP直连，此类游戏一般<strong>有多人游戏的入口</strong>但既<strong>没有本地预设的P1234玩家位置</strong>，也没有IP直连的输入框，可能能够<strong>自动搜索</strong>网络下的房间。</p>
<ol>
<li>
<h3 id="1部署本地服务器必需-准备-1"><a class="header" href="#1部署本地服务器必需-准备-1"><strong>1.部署本地服务器(必需-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>启动</strong>对应的<strong>服务端程序</strong>（可能需要填入部分配置信息）并等待部署完成即可，有的软件不自带服务端的启动程序，或者其不能够满足服务器的需求，因此需要下载对应的服务端</p>
<ul>
<li>
<h4 id="局域网房间通式-1"><a class="header" href="#局域网房间通式-1">局域网房间通式</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li>房主：启动目标游戏---&gt;多人游戏---&gt;创建主机---&gt;启动组网程序并加入同一组网网络---&gt;等待其他玩家加入</li>
<li>访客：启动目标游戏---&gt;多人游戏---&gt;启动组网程序并加入同一组网网络---&gt;回到游戏在局域网下搜索主机并加入对应的房间</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="泰拉瑞亚terraria示例eg-1"><a class="header" href="#泰拉瑞亚terraria示例eg-1">泰拉瑞亚Terraria（示例eg）</a></h4>
</li>
</ul>
<blockquote>
<p>房主启动游戏后选择多人游戏---&gt;创建主机即可（pe，pc同理）</p>
</blockquote>
<ul>
<li>
<h4 id="我的世界minecrafteg-1"><a class="header" href="#我的世界minecrafteg-1">我的世界Minecraft（eg）</a></h4>
</li>
</ul>
<blockquote>
<h5 id="方法一启用游戏内置局域网服务器-1"><a class="header" href="#方法一启用游戏内置局域网服务器-1">方法一：启用游戏内置局域网服务器</a></h5>
<blockquote>
<p>房主启动游戏后选择单人游戏---&gt;进入选定世界---&gt;按键ESC---&gt;对局域网开放---&gt;(允许作弊：启用命令)创建一个局域网世界(给定的随机端口也可nat使用，但没必要)</p>
</blockquote>
<h5 id="方法二部署服务端-1"><a class="header" href="#方法二部署服务端-1">方法二：部署服务端</a></h5>
<blockquote>
<p>请跳转至内网穿透部分查看部署服务器端方法，部署完后再回来下一步</p>
</blockquote>
</blockquote>
</blockquote>
<ol start="2">
<li>
<h3 id="2异地组网方式通用-实现-1"><a class="header" href="#2异地组网方式通用-实现-1"><strong>2.异地组网方式(通用-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>前言：<strong>异地组网相较于其他方式依赖于</strong>软件的自动搜索</strong>，只是在理论上简单，实际操作更可能遇到问题，此时最好查询<strong>官方文档</strong>，这里我提出以下<strong>两</strong>点建议：</p>
<ol>
<li>组网成功后可以在<strong>命令提示符</strong>中<strong>ping</strong>软件给出的<strong>虚拟网内其他用户的地址</strong>，以检查是否能够连通，若不能ping通大概率是不成功的</li>
<li>若<strong>能ping通</strong>但软件自动搜索<strong>不能搜到</strong>，则<strong>检查防火墙</strong>的相关配置，若还是不行可以在对应的<strong>社区咨询</strong></li>
</ol>
<ul>
<li>
<p><strong>中转服务器类型异地组网</strong>
<img src="https://s11.ax1x.com/2023/08/15/pPMof7F.png" alt="异地组网流程图，但不一定正确" /></p>
</li>
<li>
<p><strong>P2P类型异地组网</strong>
<img src="https://s11.ax1x.com/2023/08/15/pPMo5tJ.png" alt="异地组网流程图，但不一定正确" />
<strong>我在这里列出常见的平台</strong>：（以下为<strong>普通用户配置:不购买套餐</strong>)</p>
</li>
<li>
<h4 id="常见平台-2"><a class="header" href="#常见平台-2">常见平台</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://pgy.oray.com/download/"><strong>蒲公英(已不完全免费)</strong></a>：学习成本低；付费不推荐，简单，只要<strong>登录同一个账号</strong>即可；</li>
<li><em><strong>Hiper</strong></em>(重名太多找不到链接)：<strong>一个</strong>注册的<strong>账号付费后</strong>可以邀请其他人加入使用；签到送时长；学习成本低；宽带较好</li>
<li><a href="https://bugxia.com/357.html"><strong>EasyN2N</strong></a>：学习成本较低；<strong>只能Windows间使用</strong>，会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；加入同一个小组即可</li>
<li><strong><a href="https://www.radmin-lan.cn/">Radmin LAN</a></strong>：学习成本低；<strong>只能Windows间使用</strong>，会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；加入同一个房间即可</li>
<li><strong><a href="https://www.7iot.net/">UDPPLAN(博客)</a></strong>：会<strong>选择自动安装</strong>一个<strong>虚拟网卡</strong>；简单免费；无需账号</li>
<li><strong><a href="https://www.teamviewer.cn/cn/">TeamViewer</a></strong>(<strong>安装</strong>要选<strong>VPN)</strong>：学习成本低；简单易用；但<strong>需要注册账号</strong></li>
<li><strong><a href="https://www.zerotier.com/">ZeroTier</a></strong>：有一定学习成本；会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；管理能力强；但<strong>对网络要求较高，不过可以自己搭建plant</strong></li>
<li><strong><a href="https://tailscale.com/">Tailscale</a></strong></li>
<li><strong><a href="https://pk.llren.com/">游侠(已不完全免费)</a>十分简单，需要实名认证</strong></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="异地组网操作流程-1"><a class="header" href="#异地组网操作流程-1"><strong>异地组网操作流程</strong></a></h4>
</li>
</ul>
<blockquote>
<p>0.注册账号[可能没有这一步]
1.<strong>创建</strong>一个<strong>网络</strong>，将<strong>网络的ID和验证密钥</strong>或者<strong>是网络名称和密钥</strong>给访客
2.访客通过给定的密钥加入该网络，即可实现异地组网</p>
<ul>
<li>无论是主机还是访客创建，只要在同一个网络下都一样，如果主机无法创建网络可以让访客试试</li>
<li>房主创建本地服务器后，一般进入游戏选择多人游戏在局域网下搜索房主即可，有的游戏允许其他人通过组网平台给定的ip直连</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="图文示例-4"><a class="header" href="#图文示例-4"><strong>图文示例</strong></a></h4>
</li>
</ul>
<blockquote>
<p>此处以<strong>蒲公英</strong>和<strong>红警2</strong>、<strong>RadminLAN</strong>和<strong>Minecraft</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：</p>
<ul>
<li><strong>蒲公英</strong>使用方法：
<img src="https://s11.ax1x.com/2023/08/15/pPMo711.png" alt="蒲公英使用教程" /></li>
<li><strong>RadminLAN</strong>使用方法（<strong>通用</strong>）：
<img src="https://s11.ax1x.com/2023/08/15/pPMoO0O.png" alt="RadminLAN使用教程" /></li>
</ul>
</blockquote>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="类型三本地预留位置的游戏通过远程控制实现远程联机-1"><a class="header" href="#类型三本地预留位置的游戏通过远程控制实现远程联机-1"><strong>类型三：本地预留位置的游戏</strong>（通过远程控制实现远程联机）</a></h2>
<blockquote>
<p><strong>前言：<strong>远程控制操作起来相对简单，<strong>一般</strong>只能</strong>主机用手柄</strong>，其他连接的<strong>访客只能用键鼠</strong>。示例以<strong>向日葵</strong>为例，这里我列出常见的远程控制软件：</p>
<ul>
<li>
<h3 id="常见平台-3"><a class="header" href="#常见平台-3">常见平台</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li><strong><a href="https://im.qq.com/index">QQ</a>/<a href="https://tim.qq.com/">TIM</a><strong>仅支持</strong>PC</strong>间控制，免费但画质一般，有一定延迟，并且<strong>只能一对一</strong>连接；在好友面板选择<strong>远程协助</strong>，等待对方同意即可</li>
<li><strong><a href="https://sunlogin.oray.com/">向日葵</a></strong>（v12绿色版无需账号登录）：免费，可以<strong>多设备连接一台设备</strong>，功能较全；只需要把<strong>ID和验证码</strong>发给好友即可让好友远程控制。（连接人数较多时可能卡顿，<strong>重启</strong>向日葵服务并让好友们重新加入即可）</li>
<li><strong><a href="https://www.teamviewer.cn/cn/">TeamViewer</a></strong>：免费；只需要把<strong>ID和验证码</strong>发给好友即可让好友远程控制。</li>
<li><strong><a href="https://parsec.app/">Parsec</a></strong>（<strong>win10+</strong>）：免费，易用，可以<strong>跨平台</strong>但有相应的<strong>系统版本限制</strong>，功能非常齐全，对游戏方面更加友好，但可能对网络有一定要求，不过有<strong>网页端</strong>可以用；既可以分享主机地址让他人加入(需要<strong>手动接受</strong>加入请求)，也可以创建公开房间或者加入处于公开状态的房间来远程控制联机</li>
<li><a href="https://meeting.tencent.com/"><strong>腾讯会议</strong></a>：免费简单；可能有一定延迟，视自己网络属性而定。</li>
<li><strong><a href="https://store.steampowered.com/about/">Steam</a>远程畅玩</strong>(流式传输)：免费，最简单，但<strong>需要双方互加好友</strong>(Steam有一定条件)，而且对<strong>网络要求较高，可能用不了</strong>，需要有人<strong>游戏在库中</strong>；游戏内<strong>Shift+Tap</strong>唤出好友列表<strong>邀请</strong>好友远程畅玩即可</li>
<li><strong><a href="https://anydesk.com/zhs">AnyDesk</a>；<a href="https://www.todesk.com/solo?v=4">ToDesk</a></strong></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="远程控制操作流程-1"><a class="header" href="#远程控制操作流程-1"><strong>远程控制操作流程</strong></a></h3>
</li>
</ul>
<blockquote>
<p>1.配置好游戏后，<strong>启动</strong>对应的远程协助软件，并<strong>通知好友启动</strong>相同的软件
2.将你的<strong>ID密钥</strong>给予好友，好友选择<strong>加入/连接</strong>功能远程获取你电脑的<strong>控制权及画面</strong>(QQ、Steam无密钥)?</p>
<ul>
<li>
<h3 id="图文示例-5"><a class="header" href="#图文示例-5"><strong>图文示例</strong></a></h3>
此处以<strong>向日葵</strong>和<strong>DR2C</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：
<strong>向日葵</strong>使用方法：
<img src="https://s11.ax1x.com/2023/08/14/pPMLM0P.png" alt="向日葵联机教程" />
<em>我不说是谁，好像有人的demo拼成了dome</em></li>
</ul>
</blockquote>
</blockquote>
<h2 id="其他附加问题-1"><a class="header" href="#其他附加问题-1"><strong>其他附加问题</strong></a></h2>
<blockquote>
<ul>
<li><strong>若需手柄但没有</strong>，可以尝试使用<strong>DroidJoy</strong>或<strong>MyJoy</strong>等软件将<strong>安卓</strong>手机转为手柄并连接电脑，亦或者是其他方法都。</li>
<li><strong>若好友电脑没有麦克风</strong>可以使用<strong>WO Mic</strong>来让<strong>安卓</strong>手机变为<strong>麦克风</strong>。</li>
<li><strong>内网穿透要求实名但不满条件</strong>的，可以尝试不断使用<strong>新兴的</strong>或者<strong>国外的</strong>内网穿透工具，一般需要提交的信息较少</li>
<li>游戏联机时非远程协助联机的<strong>服务器端的版本</strong>必须与<strong>用户端的版本</strong>相匹配，像<strong>TR</strong>、<strong>MC</strong>可以通过安装<strong>跨版本插件</strong>（链接见下）来允许<strong>大版本内</strong>的联机兼容</li>
<li><strong>远程协助</strong>一般只有<strong>主机的手柄</strong>输入可以被识别，<strong>其他连接者</strong>只能<strong>使用键盘</strong>，因此大部分软件远程控制只能<strong>主机使用手柄</strong>。</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="类型二提供局域网的程序通过异地组网实现远程联机-2"><a class="header" href="#类型二提供局域网的程序通过异地组网实现远程联机-2"><strong>类型二：提供局域网的程序</strong>（通过异地组网实现远程联机）</a></h2>
<p><strong>判断方法</strong>：提供IP直连的基本都支持局域网，因为你可以用路<strong>由器分配的地址</strong>和<strong>对应程序的端口</strong>实现<strong>内网中不同设备</strong>的<strong>信息交换</strong>，只是可能有些程序不提供现成的独立页面和自动搜索；也有一些程序仅支持使用局域网联机不开放IP直连，此类游戏一般<strong>有多人游戏的入口</strong>但既<strong>没有本地预设的P1234玩家位置</strong>，也没有IP直连的输入框，可能能够<strong>自动搜索</strong>网络下的房间。</p>
<ol>
<li>
<h3 id="1部署本地服务器必需-准备-2"><a class="header" href="#1部署本地服务器必需-准备-2"><strong>1.部署本地服务器(必需-准备)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>启动</strong>对应的<strong>服务端程序</strong>（可能需要填入部分配置信息）并等待部署完成即可，有的软件不自带服务端的启动程序，或者其不能够满足服务器的需求，因此需要下载对应的服务端</p>
<ul>
<li>
<h4 id="局域网房间通式-2"><a class="header" href="#局域网房间通式-2">局域网房间通式</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li>房主：启动目标游戏---&gt;多人游戏---&gt;创建主机---&gt;启动组网程序并加入同一组网网络---&gt;等待其他玩家加入</li>
<li>访客：启动目标游戏---&gt;多人游戏---&gt;启动组网程序并加入同一组网网络---&gt;回到游戏在局域网下搜索主机并加入对应的房间</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="泰拉瑞亚terraria示例eg-2"><a class="header" href="#泰拉瑞亚terraria示例eg-2">泰拉瑞亚Terraria（示例eg）</a></h4>
</li>
</ul>
<blockquote>
<p>房主启动游戏后选择多人游戏---&gt;创建主机即可（pe，pc同理）</p>
</blockquote>
<ul>
<li>
<h4 id="我的世界minecrafteg-2"><a class="header" href="#我的世界minecrafteg-2">我的世界Minecraft（eg）</a></h4>
</li>
</ul>
<blockquote>
<h5 id="方法一启用游戏内置局域网服务器-2"><a class="header" href="#方法一启用游戏内置局域网服务器-2">方法一：启用游戏内置局域网服务器</a></h5>
<blockquote>
<p>房主启动游戏后选择单人游戏---&gt;进入选定世界---&gt;按键ESC---&gt;对局域网开放---&gt;(允许作弊：启用命令)创建一个局域网世界(给定的随机端口也可nat使用，但没必要)</p>
</blockquote>
<h5 id="方法二部署服务端-2"><a class="header" href="#方法二部署服务端-2">方法二：部署服务端</a></h5>
<blockquote>
<p>请跳转至内网穿透部分查看部署服务器端方法，部署完后再回来下一步</p>
</blockquote>
</blockquote>
</blockquote>
<ol start="2">
<li>
<h3 id="2异地组网方式通用-实现-2"><a class="header" href="#2异地组网方式通用-实现-2"><strong>2.异地组网方式(通用-实现)</strong></a></h3>
</li>
</ol>
<blockquote>
<p><strong>前言：<strong>异地组网相较于其他方式依赖于</strong>软件的自动搜索</strong>，只是在理论上简单，实际操作更可能遇到问题，此时最好查询<strong>官方文档</strong>，这里我提出以下<strong>两</strong>点建议：</p>
<ol>
<li>组网成功后可以在<strong>命令提示符</strong>中<strong>ping</strong>软件给出的<strong>虚拟网内其他用户的地址</strong>，以检查是否能够连通，若不能ping通大概率是不成功的</li>
<li>若<strong>能ping通</strong>但软件自动搜索<strong>不能搜到</strong>，则<strong>检查防火墙</strong>的相关配置，若还是不行可以在对应的<strong>社区咨询</strong></li>
</ol>
<ul>
<li>
<p><strong>中转服务器类型异地组网</strong>
<img src="https://s11.ax1x.com/2023/08/15/pPMof7F.png" alt="异地组网流程图，但不一定正确" /></p>
</li>
<li>
<p><strong>P2P类型异地组网</strong>
<img src="https://s11.ax1x.com/2023/08/15/pPMo5tJ.png" alt="异地组网流程图，但不一定正确" />
<strong>我在这里列出常见的平台</strong>：（以下为<strong>普通用户配置:不购买套餐</strong>)</p>
</li>
<li>
<h4 id="常见平台-4"><a class="header" href="#常见平台-4">常见平台</a></h4>
</li>
</ul>
<blockquote>
<ul>
<li><a href="https://pgy.oray.com/download/"><strong>蒲公英(已不完全免费)</strong></a>：学习成本低；付费不推荐，简单，只要<strong>登录同一个账号</strong>即可；</li>
<li><em><strong>Hiper</strong></em>(重名太多找不到链接)：<strong>一个</strong>注册的<strong>账号付费后</strong>可以邀请其他人加入使用；签到送时长；学习成本低；宽带较好</li>
<li><a href="https://bugxia.com/357.html"><strong>EasyN2N</strong></a>：学习成本较低；<strong>只能Windows间使用</strong>，会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；加入同一个小组即可</li>
<li><strong><a href="https://www.radmin-lan.cn/">Radmin LAN</a></strong>：学习成本低；<strong>只能Windows间使用</strong>，会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；加入同一个房间即可</li>
<li><strong><a href="https://www.7iot.net/">UDPPLAN(博客)</a></strong>：会<strong>选择自动安装</strong>一个<strong>虚拟网卡</strong>；简单免费；无需账号</li>
<li><strong><a href="https://www.teamviewer.cn/cn/">TeamViewer</a></strong>(<strong>安装</strong>要选<strong>VPN)</strong>：学习成本低；简单易用；但<strong>需要注册账号</strong></li>
<li><strong><a href="https://www.zerotier.com/">ZeroTier</a></strong>：有一定学习成本；会<strong>自动安装</strong>一个<strong>虚拟网卡</strong>；管理能力强；但<strong>对网络要求较高，不过可以自己搭建plant</strong></li>
<li><strong><a href="https://tailscale.com/">Tailscale</a></strong></li>
<li><strong><a href="https://pk.llren.com/">游侠(已不完全免费)</a>十分简单，需要实名认证</strong></li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="异地组网操作流程-2"><a class="header" href="#异地组网操作流程-2"><strong>异地组网操作流程</strong></a></h4>
</li>
</ul>
<blockquote>
<p>0.注册账号[可能没有这一步]
1.<strong>创建</strong>一个<strong>网络</strong>，将<strong>网络的ID和验证密钥</strong>或者<strong>是网络名称和密钥</strong>给访客
2.访客通过给定的密钥加入该网络，即可实现异地组网</p>
<ul>
<li>无论是主机还是访客创建，只要在同一个网络下都一样，如果主机无法创建网络可以让访客试试</li>
<li>房主创建本地服务器后，一般进入游戏选择多人游戏在局域网下搜索房主即可，有的游戏允许其他人通过组网平台给定的ip直连</li>
</ul>
</blockquote>
<ul>
<li>
<h4 id="图文示例-6"><a class="header" href="#图文示例-6"><strong>图文示例</strong></a></h4>
</li>
</ul>
<blockquote>
<p>此处以<strong>蒲公英</strong>和<strong>红警2</strong>、<strong>RadminLAN</strong>和<strong>Minecraft</strong>为例（<strong>图示</strong>+<strong>简短文字描述</strong>）：</p>
<ul>
<li><strong>蒲公英</strong>使用方法：
<img src="https://s11.ax1x.com/2023/08/15/pPMo711.png" alt="蒲公英使用教程" /></li>
<li><strong>RadminLAN</strong>使用方法（<strong>通用</strong>）：
<img src="https://s11.ax1x.com/2023/08/15/pPMoO0O.png" alt="RadminLAN使用教程" /></li>
</ul>
</blockquote>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><ul>
<li>Date: 2023-02-01 22:23:40</li>
</ul>
<h2 id="前言-1"><a class="header" href="#前言-1">前言</a></h2>
<ul>
<li>建议配合视频教程一起使用，这篇提供我已知的最优解，但<strong>不一定是最好</strong>；</li>
<li>完成本地的直播网站需要一台满足配置要求的设备(能<strong>带动OBS</strong>+<strong>内网穿透</strong>且<strong>承载</strong>住他人的<strong>拉流</strong>；主要吃<strong>CPU和宽带</strong>，CPU方面基本上<strong>一般电脑都可以</strong>)，体量不大宽带家用蛮够，主要看映射软件给你开放的宽带（obs默认码率一个访问者流量传输约为<strong>128KB/s</strong>），如果面向人群体量稍大如班级可以考虑研究一下<strong>p2p</strong>技术，再大这则博客就没用了，大型的平台主要采用<strong>CDN分发</strong>和<strong>p2p</strong>；</li>
<li>需要两条http协议的隧道，如果网页有托管可以直接对外公开的话可以只要一个隧道（Github是https打头，数据不和http互通，需要额外配置）</li>
</ul>
<h2 id="准备工作"><a class="header" href="#准备工作">准备工作</a></h2>
<p>除<strong>内网穿透</strong>需求<strong>可能要多个</strong>，<strong>其他工具只要一个</strong>即可</p>
<ul>
<li>
<h3 id="网页部署工具选一"><a class="header" href="#网页部署工具选一"><strong>网页部署工具</strong>（选一）</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><strong>Windows自带</strong>的<strong>IIS组件</strong></p>
</li>
<li>
<p><a href="https://www.xp.cn/">小皮面板phpStudy</a></p>
</li>
<li>
<p><a href="https://cn.vuejs.org/">Vue.js渐进式 JavaScript 框架</a></p>
</li>
<li>
<p><a href="https://hexo.io/zh-cn/index.html">Hexo</a></p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="推流工具选一"><a class="header" href="#推流工具选一"><strong>推流工具</strong>（选一）</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><a href="https://ffmpeg.org/">FFmpeg</a></p>
</li>
<li>
<p><a href="https://obsproject.com/">OBS</a></p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="流媒体中转服务器选一"><a class="header" href="#流媒体中转服务器选一"><strong>流媒体中转服务器</strong>（选一）</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><a href="https://github.com/gwuhaolin/livego">LiveGo：纯 Golang 编写的直播服务器，性能高，跨平台</a></p>
</li>
<li>
<p><a href="https://github.com/arut/nginx-rtmp-module">nginx-rtmp-module：基于NGINX的媒体流服务器</a></p>
</li>
<li>
<p><a href="https://github.com/illuspas/Node-Media-Server">Node-Media-Server：一个 Node.js 实现的RTMP/HTTP/WebSocket/HLS/DASH流媒体服务器</a></p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="内网穿透工具这里只列出支持httphttps协议的视频演示方法需要凑出2条隧道"><a class="header" href="#内网穿透工具这里只列出支持httphttps协议的视频演示方法需要凑出2条隧道"><strong>内网穿透工具（这里只列出支持http/https协议的)</strong>(视频演示方法需要凑出<strong>2条隧道</strong>）</a></h3>
<blockquote>
<ul>
<li><a href="https://www.cpolar.com/"><strong>cpolar</strong></a>：学习成本低；无需实名；无限流量；<strong>动态域名</strong>且<strong>无</strong>UDP；速度较低；<strong>http</strong>协议提供<strong>免费动态域名</strong>，<strong>免费一条http</strong>隧道</li>
<li><a href="https://www.fgnwct.com/"><strong>飞鸽</strong></a>：学习成本低；<strong>0.5M</strong>，签到给流量；<strong>http</strong>协议提供<strong>免费域名</strong>；<strong>免费两条</strong>隧道但<strong>http只能一条</strong></li>
<li><a href="https://www.openfrp.net"><strong>OpenFrp 内网穿透（需域名）</strong></a>：学习成本低(带GUI启动器和樱花相似)免费，签到领流量；<strong>部分节点</strong>无需实名；速度<strong>限制</strong>12M/s(速度取决于所选节点与访客距离)；固定域名；<strong>http</strong>协议需要<strong>绑定自己的域名</strong></li>
<li><a href="https://natapp.cn/"><strong>NATAPP</strong></a>：学习成本一般；<strong>动态域名</strong>；<strong>实名</strong>；1M；<strong>http</strong>协议提供<strong>免费域名</strong></li>
<li><a href="http://www.ipyingshe.com/">闪库</a>：1M/s；<strong>仅支持Http</strong>，<strong>随机固定</strong>域名；未来可能实名
<strong>（以下是其他我没用过的内网穿透）</strong></li>
<li><a href="https://ngrok.com/"><strong>ngrok(https)</strong></a>：学习成本一般；无需实名；只给<strong>一条免费隧道</strong>，离得近的节点延迟较低；http会<strong>自动换https</strong>协议（相当于<strong>不支持http</strong>）</li>
<li><a href="https://hsk.oray.com/"><strong>花生壳(https)</strong></a>：极低的学习成本；<strong>实名1M</strong>每月1G且<strong>无Http只有https</strong>，隧道固定域名</li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="工作原理及其流程视频配置"><a class="header" href="#工作原理及其流程视频配置">工作原理及其流程（视频配置）</a></h2>
<ul>
<li>
<h3 id="画面采集以及推流"><a class="header" href="#画面采集以及推流">画面采集以及推流</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>OBS<strong>添加采集源</strong>（常用三个）：</li>
</ul>
<blockquote>
<ol>
<li><strong>显示器采集</strong>（桌面画面）</li>
<li><strong>游戏源</strong>（全屏程序）</li>
<li><strong>音频输入采集</strong>（麦克风）</li>
</ol>
</blockquote>
<ul>
<li>OBS<strong>推流配置</strong></li>
</ul>
<blockquote>
<ol>
<li>
<p>OBS选择<strong>设置</strong> —&gt;<strong>推流</strong>页面；<strong>服务</strong>选择<strong>自定义</strong></p>
</li>
<li>
<p><strong>服务器</strong>（推流地址）默认填<strong>rtmp://127.0.0.1:1935/live/</strong>（如果要改下面的<strong>拉流地址</strong>也要改一下）</p>
</li>
<li>
<p><strong>启动流媒体服务器LiveGo</strong>并<strong>获取channelkey</strong>；在<strong>浏览器地址栏</strong>输入http://localhost:8090/control/get?room=movie</p>
<p><strong>并回车，复制给出的</strong>channelkey<strong>填写到OBS推流页面的</strong>串流密钥**；</p>
</li>
</ol>
</blockquote>
</blockquote>
<ul>
<li>
<h3 id="内网穿透映射网站和http协议7001端口两条隧道"><a class="header" href="#内网穿透映射网站和http协议7001端口两条隧道">内网穿透映射网站和http协议7001端口（两条隧道）</a></h3>
</li>
</ul>
<blockquote>
<p><strong>启动内网穿透工具</strong>，此处以<strong>NatApp和飞鸽为例</strong>（需要<strong>两条http隧道</strong>在线）</p>
<ul>
<li><strong>飞鸽（映射80）</strong></li>
</ul>
<blockquote>
<p>1.官网注册账号进入<strong>控制台</strong></p>
<ol start="2">
<li><strong>开通隧道</strong> —&gt; 选一个<strong>免费节点</strong> —&gt; <strong>备注、前置域名自定义</strong> —&gt; <strong>本地IP端口</strong>后面的<strong>端口改为80</strong> —&gt; <strong>确认开通</strong></li>
<li>下载对应的<strong>客户端</strong>，此处以<strong>带GUI的客户端</strong>为例，将<strong>隧道的id粘贴</strong>进去<strong>再启动隧道</strong>即可</li>
</ol>
</blockquote>
<ul>
<li><strong>NatApp（映射7001）</strong></li>
</ul>
<blockquote>
<ol>
<li>官网注册账号进入<strong>仪表盘</strong></li>
<li><strong>购买隧道</strong> —&gt; <strong>免费隧道</strong>：<strong>隧道名自定义</strong>；<strong>Web类型</strong>；<strong>本地端口7001</strong></li>
<li>下载客户端，将authtoken复制粘贴到Natapp的配置文件中
其中，<strong>80端口</strong>为<strong>phpstudy部署网页的默认端口，<strong>根据自己网站填写不同的，如</strong>hexo使用4000</strong>，<strong>vue则为8080</strong>
<strong>7001端口</strong>为<strong>LiveGo</strong>提供的<strong>HTTP-FLV传输协议的接口</strong>
<strong>每个隧道映射成功</strong>后<strong>都会给一个</strong>没有端口的<strong>地址</strong>，这个之后会用到</li>
</ol>
</blockquote>
</blockquote>
<ul>
<li>
<h3 id="网页播放器拉流并部署"><a class="header" href="#网页播放器拉流并部署">网页播放器拉流并部署</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li><strong>网页播放器配置</strong></li>
</ul>
<blockquote>
<p><strong>记事本</strong>或其他<strong>文本编辑器方式</strong>打开<strong>压缩包解压</strong>后的LiveOnlineWeb\phpstudy_pro\WWW\index.html文件
将<strong>body</strong>标签中的<strong>script</strong>标签内<strong>播放器的url</strong>改为<strong>内网穿透映射7001端口后</strong>给出的<strong>地址</strong> <strong>+</strong> <strong>OBS推流地址端口后面的路径</strong> <strong>+ movie.flv</strong>
<strong>示例：url: 'http://xxxxxxxxx.xx.cpolar.top/live/movie.flv'</strong>
<strong>本地拉流地址：url：'http://127.0.0.1:7001/live/movie.flv'</strong>
（本地视频流地址，只有<strong>主机</strong>能够拉流成功，其他人访问是拉自己设备该地址对应目录下的文件，故<strong>其他人无法拉流成功</strong>，<strong>仅供自己测试</strong>用，该地址<strong>不会占用宽带</strong>）</p>
</blockquote>
<ul>
<li>
<h3 id="部署网站phpstudy为例"><a class="header" href="#部署网站phpstudy为例">部署网站（PHPStudy为例）</a></h3>
</li>
</ul>
<blockquote>
<ol>
<li>打开<strong>PHPstudy</strong>应用程序</li>
<li>启动<strong>WNMP服务</strong></li>
<li>在<strong>浏览器地址栏</strong>输入<strong>http://127.0.0.1:80</strong> 或 <strong>http://localhost</strong> 即可进入<strong>本地网页</strong>（80可选填，都一样）</li>
</ol>
</blockquote>
<ul>
<li><strong>检验是否推流成功</strong></li>
</ul>
<blockquote>
<p><strong>方法一：<strong>在</strong>浏览器地址栏中</strong>直接<strong>将url地址填入并回车</strong>，检查浏览器是否能够<strong>下载到一个名为movie.flv的文件</strong></p>
<p><strong>方法二：<strong>直接打开网站检查是否能加载出</strong>直播画面以及声音</strong></p>
<p><strong>问题排查：</strong></p>
<ul>
<li><strong>方法二播放器黑屏</strong>然后使用<strong>方法一发现能够下载到流视频文件</strong>，这时候只要<strong>刷新</strong>一下网站即可，再不行<strong>OBS切断重新推流</strong>再<strong>刷新</strong></li>
<li><strong>直播画面有声音但是黑屏</strong>，可能是<strong>程序画面采用全屏方式运行</strong>但在<strong>采集源中没有对全屏应用的画面采集</strong>，此时在<strong>OBS采集源</strong>中加入<strong>游戏源</strong>选择<strong>采集任意全屏应用程序</strong>即可；或者将<strong>全屏程序</strong>改为<strong>窗口模式</strong>或者<strong>无边框模式</strong></li>
<li><strong>有电脑的声音但是听不到自己发的声音</strong>，可能是<strong>没有麦克风的采集源</strong>，在OBS采集源<strong>加入音频输入采集</strong>；或者使用<strong>其他手段</strong>如<strong>手机电脑加入同一个通话频道</strong>，会自动采集通话程序的声音，就是回声可能相对严重，也会有一定延迟，此时建议使用<strong>WO Mic</strong>。</li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<h3 id="结语"><a class="header" href="#结语">结语</a></h3>
</li>
</ul>
<blockquote>
<p>最后将<strong>内网穿透映射网页端口提供的地址</strong>分享给他人浏览即可，
其他人用<strong>浏览器打开该地址</strong>即可通过静态网页上的播放器就可以观看你的OBS推出的视频流画面。</p>
</blockquote>
<ul>
<li>
<h3 id="流程图直观展示"><a class="header" href="#流程图直观展示">流程图直观展示</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li><strong>本地拉流演示图</strong>（不一定正确）
<img src="https://s11.ax1x.com/2023/08/14/pPMOCcj.png" alt="本地拉流，看到该消息可能是图片加载失败，和视频里的流程图是一样的，可以去看视频当中的" /></li>
<li><strong>其他人观看直播原理演示图</strong>（不一定正确）
<img src="https://s11.ax1x.com/2023/08/14/pPMOFun.png" alt="其他人观看直播原理，看到该消息可能是图片加载失败，和视频里的流程图是一样的，可以去看视频当中的" /></li>
</ul>
</blockquote>
<h2 id="拓展-2"><a class="header" href="#拓展-2">拓展</a></h2>
<ul>
<li>
<h3 id="解决内网穿透提供宽带速度不够的问题"><a class="header" href="#解决内网穿透提供宽带速度不够的问题">解决内网穿透提供宽带速度不够的问题</a></h3>
</li>
</ul>
<blockquote>
<p>这个问题我目前是采用<strong>多线程</strong>的方法解决的（整合包中我提供了line234页面并写好了超链接，根据需要自行填入映射好的7001本地端口地址到视频流的url），通过<strong>启用多个内网穿透工具共同映射7001端口</strong>，<strong>分别</strong>将<strong>给定的地址</strong>填入<strong>不同的页面</strong>，用户通过<strong>切换页面</strong>来<strong>减少单个</strong>内网穿透工具的<strong>宽带压力</strong>，以此实现宽带的拓展</p>
</blockquote>
<ul>
<li>
<h3 id="解决电脑没有麦克风的问题"><a class="header" href="#解决电脑没有麦克风的问题">解决电脑没有麦克风的问题</a></h3>
</li>
</ul>
<p>倘若有人的主机电脑<strong>没有麦克风或麦克风坏了</strong>，正好有<strong>手机在身边可以使用</strong>的话可以使用<strong>WO Mic</strong>来解决这个问题</p>
<blockquote>
<h4 id="wo-mic局域网连接使用教程"><a class="header" href="#wo-mic局域网连接使用教程">WO Mic局域网连接使用教程</a></h4>
<ul>
<li>流程图：
<img src="https://s11.ax1x.com/2023/08/14/pPMOluR.png" alt="如果看到该文段可能是图片加载失败了，去看视频吧" /></li>
</ul>
<ol>
<li>手机端启动<strong>WO Mic应用程序并运行</strong>（在局域网广播）</li>
<li>将给定的<strong>局域网地址</strong>填写到<strong>电脑WO Mic Client的连接</strong> —&gt; <strong>连接...</strong> —&gt; <strong>手机IP地址</strong>输入框中 —&gt; 再点击<strong>连接</strong>即可</li>
</ol>
<ul>
<li><strong>手机端</strong>控制<strong>音量大小</strong>和<strong>是否传输声音</strong>（=开关麦）；<strong>电脑端</strong>可以选择设置<strong>本地播放</strong>方便<strong>调试声音</strong></li>
</ul>
</blockquote>
<h2 id="总结-1"><a class="header" href="#总结-1">总结</a></h2>
<blockquote>
<p><strong>通过内网穿透直播</strong>仅适合<strong>面向小众群体</strong>，例如<strong>学生</strong>等<strong>无法与直播平台签约</strong>或者<strong>不想和直播平台签约</strong>又<strong>想体验直播</strong>的人群，或者只是<strong>单纯想挂在自己博客上</strong>让访客碰运气看看有没有直播。
这项技术<strong>优点</strong>是<strong>搭建迅速而且免费</strong>（<strong>不花钱可以使用，人数不多体验还是很好的</strong>），<strong>有域名</strong>的话可以使用更好的映射软件，<strong>它们提供更好的免费的宽带</strong>，如<strong>OpenFrp</strong>（地址上面链接），感兴趣的可以尝试一下，我下面会发布<strong>整合包的链接</strong>（<strong>不含内网穿透工具</strong>和<strong>推流工具</strong>，<strong>需自行额外安装</strong>）</p>
<ul>
<li>蓝奏云
<blockquote>
<p>https://wwxr.lanzoum.com/i1uKo0mhm3id
密码:civt</p>
</blockquote>
</li>
<li>百度网盘
<blockquote>
<p>https://pan.baidu.com/s/1p33ncwXEq1UmLEuEerVSKA?pwd=1111
提取码：1111</p>
</blockquote>
</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="前言-2"><a class="header" href="#前言-2">前言</a></h2>
<ul>
<li>建议配合视频教程一起使用，这篇提供我已知的最优解，但<strong>不一定是最好</strong>；</li>
<li>完成本地的直播网站需要一台满足配置要求的设备(能<strong>带动OBS</strong>+<strong>内网穿透</strong>且<strong>承载</strong>住他人的<strong>拉流</strong>；主要吃<strong>CPU和宽带</strong>，CPU方面基本上<strong>一般电脑都可以</strong>)，体量不大宽带家用蛮够，主要看映射软件给你开放的宽带（obs默认码率一个访问者流量传输约为<strong>128KB/s</strong>），如果面向人群体量稍大如班级可以考虑研究一下<strong>p2p</strong>技术，再大这则博客就没用了，大型的平台主要采用<strong>CDN分发</strong>和<strong>p2p</strong>；</li>
<li>需要两条http协议的隧道，如果网页有托管可以直接对外公开的话可以只要一个隧道（Github是https打头，数据不和http互通，需要额外配置）</li>
</ul>
<h2 id="准备工作-1"><a class="header" href="#准备工作-1">准备工作</a></h2>
<p>除<strong>内网穿透</strong>需求<strong>可能要多个</strong>，<strong>其他工具只要一个</strong>即可</p>
<ul>
<li>
<h3 id="网页部署工具选一-1"><a class="header" href="#网页部署工具选一-1"><strong>网页部署工具</strong>（选一）</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><strong>Windows自带</strong>的<strong>IIS组件</strong></p>
</li>
<li>
<p><a href="https://www.xp.cn/">小皮面板phpStudy</a></p>
</li>
<li>
<p><a href="https://cn.vuejs.org/">Vue.js渐进式 JavaScript 框架</a></p>
</li>
<li>
<p><a href="https://hexo.io/zh-cn/index.html">Hexo</a></p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="推流工具选一-1"><a class="header" href="#推流工具选一-1"><strong>推流工具</strong>（选一）</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><a href="https://ffmpeg.org/">FFmpeg</a></p>
</li>
<li>
<p><a href="https://obsproject.com/">OBS</a></p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="流媒体中转服务器选一-1"><a class="header" href="#流媒体中转服务器选一-1"><strong>流媒体中转服务器</strong>（选一）</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><a href="https://github.com/gwuhaolin/livego">LiveGo：纯 Golang 编写的直播服务器，性能高，跨平台</a></p>
</li>
<li>
<p><a href="https://github.com/arut/nginx-rtmp-module">nginx-rtmp-module：基于NGINX的媒体流服务器</a></p>
</li>
<li>
<p><a href="https://github.com/illuspas/Node-Media-Server">Node-Media-Server：一个 Node.js 实现的RTMP/HTTP/WebSocket/HLS/DASH流媒体服务器</a></p>
</li>
</ul>
</blockquote>
<ul>
<li>
<h3 id="内网穿透工具这里只列出支持httphttps协议的视频演示方法需要凑出2条隧道-1"><a class="header" href="#内网穿透工具这里只列出支持httphttps协议的视频演示方法需要凑出2条隧道-1"><strong>内网穿透工具（这里只列出支持http/https协议的)</strong>(视频演示方法需要凑出<strong>2条隧道</strong>）</a></h3>
<blockquote>
<ul>
<li><a href="https://www.cpolar.com/"><strong>cpolar</strong></a>：学习成本低；无需实名；无限流量；<strong>动态域名</strong>且<strong>无</strong>UDP；速度较低；<strong>http</strong>协议提供<strong>免费动态域名</strong>，<strong>免费一条http</strong>隧道</li>
<li><a href="https://www.fgnwct.com/"><strong>飞鸽</strong></a>：学习成本低；<strong>0.5M</strong>，签到给流量；<strong>http</strong>协议提供<strong>免费域名</strong>；<strong>免费两条</strong>隧道但<strong>http只能一条</strong></li>
<li><a href="https://www.openfrp.net"><strong>OpenFrp 内网穿透（需域名）</strong></a>：学习成本低(带GUI启动器和樱花相似)免费，签到领流量；<strong>部分节点</strong>无需实名；速度<strong>限制</strong>12M/s(速度取决于所选节点与访客距离)；固定域名；<strong>http</strong>协议需要<strong>绑定自己的域名</strong></li>
<li><a href="https://natapp.cn/"><strong>NATAPP</strong></a>：学习成本一般；<strong>动态域名</strong>；<strong>实名</strong>；1M；<strong>http</strong>协议提供<strong>免费域名</strong></li>
<li><a href="http://www.ipyingshe.com/">闪库</a>：1M/s；<strong>仅支持Http</strong>，<strong>随机固定</strong>域名；未来可能实名
<strong>（以下是其他我没用过的内网穿透）</strong></li>
<li><a href="https://ngrok.com/"><strong>ngrok(https)</strong></a>：学习成本一般；无需实名；只给<strong>一条免费隧道</strong>，离得近的节点延迟较低；http会<strong>自动换https</strong>协议（相当于<strong>不支持http</strong>）</li>
<li><a href="https://hsk.oray.com/"><strong>花生壳(https)</strong></a>：极低的学习成本；<strong>实名1M</strong>每月1G且<strong>无Http只有https</strong>，隧道固定域名</li>
<li><strong>．．．．．．</strong>（数据来源于2023.1，<strong>可能不准确</strong>如有需要在下面留言更新）</li>
</ul>
</blockquote>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="工作原理及其流程视频配置-1"><a class="header" href="#工作原理及其流程视频配置-1">工作原理及其流程（视频配置）</a></h2>
<ul>
<li>
<h3 id="画面采集以及推流-1"><a class="header" href="#画面采集以及推流-1">画面采集以及推流</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li>OBS<strong>添加采集源</strong>（常用三个）：</li>
</ul>
<blockquote>
<ol>
<li><strong>显示器采集</strong>（桌面画面）</li>
<li><strong>游戏源</strong>（全屏程序）</li>
<li><strong>音频输入采集</strong>（麦克风）</li>
</ol>
</blockquote>
<ul>
<li>OBS<strong>推流配置</strong></li>
</ul>
<blockquote>
<ol>
<li>
<p>OBS选择<strong>设置</strong> —&gt;<strong>推流</strong>页面；<strong>服务</strong>选择<strong>自定义</strong></p>
</li>
<li>
<p><strong>服务器</strong>（推流地址）默认填<strong>rtmp://127.0.0.1:1935/live/</strong>（如果要改下面的<strong>拉流地址</strong>也要改一下）</p>
</li>
<li>
<p><strong>启动流媒体服务器LiveGo</strong>并<strong>获取channelkey</strong>；在<strong>浏览器地址栏</strong>输入http://localhost:8090/control/get?room=movie</p>
<p><strong>并回车，复制给出的</strong>channelkey<strong>填写到OBS推流页面的</strong>串流密钥**；</p>
</li>
</ol>
</blockquote>
</blockquote>
<ul>
<li>
<h3 id="内网穿透映射网站和http协议7001端口两条隧道-1"><a class="header" href="#内网穿透映射网站和http协议7001端口两条隧道-1">内网穿透映射网站和http协议7001端口（两条隧道）</a></h3>
</li>
</ul>
<blockquote>
<p><strong>启动内网穿透工具</strong>，此处以<strong>NatApp和飞鸽为例</strong>（需要<strong>两条http隧道</strong>在线）</p>
<ul>
<li><strong>飞鸽（映射80）</strong></li>
</ul>
<blockquote>
<p>1.官网注册账号进入<strong>控制台</strong></p>
<ol start="2">
<li><strong>开通隧道</strong> —&gt; 选一个<strong>免费节点</strong> —&gt; <strong>备注、前置域名自定义</strong> —&gt; <strong>本地IP端口</strong>后面的<strong>端口改为80</strong> —&gt; <strong>确认开通</strong></li>
<li>下载对应的<strong>客户端</strong>，此处以<strong>带GUI的客户端</strong>为例，将<strong>隧道的id粘贴</strong>进去<strong>再启动隧道</strong>即可</li>
</ol>
</blockquote>
<ul>
<li><strong>NatApp（映射7001）</strong></li>
</ul>
<blockquote>
<ol>
<li>官网注册账号进入<strong>仪表盘</strong></li>
<li><strong>购买隧道</strong> —&gt; <strong>免费隧道</strong>：<strong>隧道名自定义</strong>；<strong>Web类型</strong>；<strong>本地端口7001</strong></li>
<li>下载客户端，将authtoken复制粘贴到Natapp的配置文件中
其中，<strong>80端口</strong>为<strong>phpstudy部署网页的默认端口，<strong>根据自己网站填写不同的，如</strong>hexo使用4000</strong>，<strong>vue则为8080</strong>
<strong>7001端口</strong>为<strong>LiveGo</strong>提供的<strong>HTTP-FLV传输协议的接口</strong>
<strong>每个隧道映射成功</strong>后<strong>都会给一个</strong>没有端口的<strong>地址</strong>，这个之后会用到</li>
</ol>
</blockquote>
</blockquote>
<ul>
<li>
<h3 id="网页播放器拉流并部署-1"><a class="header" href="#网页播放器拉流并部署-1">网页播放器拉流并部署</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li><strong>网页播放器配置</strong></li>
</ul>
<blockquote>
<p><strong>记事本</strong>或其他<strong>文本编辑器方式</strong>打开<strong>压缩包解压</strong>后的LiveOnlineWeb\phpstudy_pro\WWW\index.html文件
将<strong>body</strong>标签中的<strong>script</strong>标签内<strong>播放器的url</strong>改为<strong>内网穿透映射7001端口后</strong>给出的<strong>地址</strong> <strong>+</strong> <strong>OBS推流地址端口后面的路径</strong> <strong>+ movie.flv</strong>
<strong>示例：url: 'http://xxxxxxxxx.xx.cpolar.top/live/movie.flv'</strong>
<strong>本地拉流地址：url：'http://127.0.0.1:7001/live/movie.flv'</strong>
（本地视频流地址，只有<strong>主机</strong>能够拉流成功，其他人访问是拉自己设备该地址对应目录下的文件，故<strong>其他人无法拉流成功</strong>，<strong>仅供自己测试</strong>用，该地址<strong>不会占用宽带</strong>）</p>
</blockquote>
<ul>
<li>
<h3 id="部署网站phpstudy为例-1"><a class="header" href="#部署网站phpstudy为例-1">部署网站（PHPStudy为例）</a></h3>
</li>
</ul>
<blockquote>
<ol>
<li>打开<strong>PHPstudy</strong>应用程序</li>
<li>启动<strong>WNMP服务</strong></li>
<li>在<strong>浏览器地址栏</strong>输入<strong>http://127.0.0.1:80</strong> 或 <strong>http://localhost</strong> 即可进入<strong>本地网页</strong>（80可选填，都一样）</li>
</ol>
</blockquote>
<ul>
<li><strong>检验是否推流成功</strong></li>
</ul>
<blockquote>
<p><strong>方法一：<strong>在</strong>浏览器地址栏中</strong>直接<strong>将url地址填入并回车</strong>，检查浏览器是否能够<strong>下载到一个名为movie.flv的文件</strong></p>
<p><strong>方法二：<strong>直接打开网站检查是否能加载出</strong>直播画面以及声音</strong></p>
<p><strong>问题排查：</strong></p>
<ul>
<li><strong>方法二播放器黑屏</strong>然后使用<strong>方法一发现能够下载到流视频文件</strong>，这时候只要<strong>刷新</strong>一下网站即可，再不行<strong>OBS切断重新推流</strong>再<strong>刷新</strong></li>
<li><strong>直播画面有声音但是黑屏</strong>，可能是<strong>程序画面采用全屏方式运行</strong>但在<strong>采集源中没有对全屏应用的画面采集</strong>，此时在<strong>OBS采集源</strong>中加入<strong>游戏源</strong>选择<strong>采集任意全屏应用程序</strong>即可；或者将<strong>全屏程序</strong>改为<strong>窗口模式</strong>或者<strong>无边框模式</strong></li>
<li><strong>有电脑的声音但是听不到自己发的声音</strong>，可能是<strong>没有麦克风的采集源</strong>，在OBS采集源<strong>加入音频输入采集</strong>；或者使用<strong>其他手段</strong>如<strong>手机电脑加入同一个通话频道</strong>，会自动采集通话程序的声音，就是回声可能相对严重，也会有一定延迟，此时建议使用<strong>WO Mic</strong>。</li>
</ul>
</blockquote>
</blockquote>
<ul>
<li>
<h3 id="结语-1"><a class="header" href="#结语-1">结语</a></h3>
</li>
</ul>
<blockquote>
<p>最后将<strong>内网穿透映射网页端口提供的地址</strong>分享给他人浏览即可，
其他人用<strong>浏览器打开该地址</strong>即可通过静态网页上的播放器就可以观看你的OBS推出的视频流画面。</p>
</blockquote>
<ul>
<li>
<h3 id="流程图直观展示-1"><a class="header" href="#流程图直观展示-1">流程图直观展示</a></h3>
</li>
</ul>
<blockquote>
<ul>
<li><strong>本地拉流演示图</strong>（不一定正确）
<img src="https://s11.ax1x.com/2023/08/14/pPMOCcj.png" alt="本地拉流，看到该消息可能是图片加载失败，和视频里的流程图是一样的，可以去看视频当中的" /></li>
<li><strong>其他人观看直播原理演示图</strong>（不一定正确）
<img src="https://s11.ax1x.com/2023/08/14/pPMOFun.png" alt="其他人观看直播原理，看到该消息可能是图片加载失败，和视频里的流程图是一样的，可以去看视频当中的" /></li>
</ul>
</blockquote>
<h2 id="拓展-3"><a class="header" href="#拓展-3">拓展</a></h2>
<ul>
<li>
<h3 id="解决内网穿透提供宽带速度不够的问题-1"><a class="header" href="#解决内网穿透提供宽带速度不够的问题-1">解决内网穿透提供宽带速度不够的问题</a></h3>
</li>
</ul>
<blockquote>
<p>这个问题我目前是采用<strong>多线程</strong>的方法解决的（整合包中我提供了line234页面并写好了超链接，根据需要自行填入映射好的7001本地端口地址到视频流的url），通过<strong>启用多个内网穿透工具共同映射7001端口</strong>，<strong>分别</strong>将<strong>给定的地址</strong>填入<strong>不同的页面</strong>，用户通过<strong>切换页面</strong>来<strong>减少单个</strong>内网穿透工具的<strong>宽带压力</strong>，以此实现宽带的拓展</p>
</blockquote>
<ul>
<li>
<h3 id="解决电脑没有麦克风的问题-1"><a class="header" href="#解决电脑没有麦克风的问题-1">解决电脑没有麦克风的问题</a></h3>
</li>
</ul>
<p>倘若有人的主机电脑<strong>没有麦克风或麦克风坏了</strong>，正好有<strong>手机在身边可以使用</strong>的话可以使用<strong>WO Mic</strong>来解决这个问题</p>
<blockquote>
<h4 id="wo-mic局域网连接使用教程-1"><a class="header" href="#wo-mic局域网连接使用教程-1">WO Mic局域网连接使用教程</a></h4>
<ul>
<li>流程图：
<img src="https://s11.ax1x.com/2023/08/14/pPMOluR.png" alt="如果看到该文段可能是图片加载失败了，去看视频吧" /></li>
</ul>
<ol>
<li>手机端启动<strong>WO Mic应用程序并运行</strong>（在局域网广播）</li>
<li>将给定的<strong>局域网地址</strong>填写到<strong>电脑WO Mic Client的连接</strong> —&gt; <strong>连接...</strong> —&gt; <strong>手机IP地址</strong>输入框中 —&gt; 再点击<strong>连接</strong>即可</li>
</ol>
<ul>
<li><strong>手机端</strong>控制<strong>音量大小</strong>和<strong>是否传输声音</strong>（=开关麦）；<strong>电脑端</strong>可以选择设置<strong>本地播放</strong>方便<strong>调试声音</strong></li>
</ul>
</blockquote>
<h2 id="总结-2"><a class="header" href="#总结-2">总结</a></h2>
<blockquote>
<p><strong>通过内网穿透直播</strong>仅适合<strong>面向小众群体</strong>，例如<strong>学生</strong>等<strong>无法与直播平台签约</strong>或者<strong>不想和直播平台签约</strong>又<strong>想体验直播</strong>的人群，或者只是<strong>单纯想挂在自己博客上</strong>让访客碰运气看看有没有直播。
这项技术<strong>优点</strong>是<strong>搭建迅速而且免费</strong>（<strong>不花钱可以使用，人数不多体验还是很好的</strong>），<strong>有域名</strong>的话可以使用更好的映射软件，<strong>它们提供更好的免费的宽带</strong>，如<strong>OpenFrp</strong>（地址上面链接），感兴趣的可以尝试一下，我下面会发布<strong>整合包的链接</strong>（<strong>不含内网穿透工具</strong>和<strong>推流工具</strong>，<strong>需自行额外安装</strong>）</p>
<ul>
<li>蓝奏云
<blockquote>
<p>https://wwxr.lanzoum.com/i1uKo0mhm3id
密码:civt</p>
</blockquote>
</li>
<li>百度网盘
<blockquote>
<p>https://pan.baidu.com/s/1p33ncwXEq1UmLEuEerVSKA?pwd=1111
提取码：1111</p>
</blockquote>
</li>
</ul>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><p>进入termux的linux系统后</p>
<h3 id="安装rust"><a class="header" href="#安装rust">安装rust</a></h3>
<blockquote>
<pre><code class="language-bash">apt install curl
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
#配置环境变量(在控制台输只保存当前会话一次)
vi ~/.profile
export PATH=$HOME/.cargo/bin:$PATH
#换源
vi ~/.cargo/config
[source.crates-io]
registry = &quot;https://github.com/rust-lang/crates.io-index&quot;
replace-with = 'ustc'
[source.ustc]
registry = &quot;git://mirrors.ustc.edu.cn/crates.io-index&quot;
</code></pre>
</blockquote>
<h3 id="error-linker-cc-not-found"><a class="header" href="#error-linker-cc-not-found">error: linker <code>cc</code> not found</a></h3>
<blockquote>
<pre><code class="language-bash">apt install build-essential
</code></pre>
</blockquote>
<h3 id="failed-to-run-custom-build-command-for-alsa-sys-v031"><a class="header" href="#failed-to-run-custom-build-command-for-alsa-sys-v031">failed to run custom build command for <code>alsa-sys v0.3.1</code></a></h3>
<blockquote>
<pre><code class="language-bash">apt install pkg-config git
git clone https://ghproxy.com/https://github.com/diwic/alsa-sys.git
cd alsa-sys &amp;&amp; regenerate_bindings.sh
#或
apt install libasound2-dev
</code></pre>
</blockquote>
<h3 id="failed-to-run-custom-build-command-for-libudev-sys-v014"><a class="header" href="#failed-to-run-custom-build-command-for-libudev-sys-v014">failed to run custom build command for libudev-sys v0.1.4</a></h3>
<blockquote>
<pre><code class="language-bash">apt install libudev-dev

</code></pre>
</blockquote>
<p>？：cargo tree | grep udev</p>
<h3 id="总结-3"><a class="header" href="#总结-3">总结</a></h3>
<blockquote>
<pre><code class="language-bash">apt install curl pkg-config libudev-dev build-essential libasound2-dev
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
cd alsa-sys &amp;&amp; regenerate_bindings.sh
</code></pre>
</blockquote>
<h3 id="编译windows平台exe"><a class="header" href="#编译windows平台exe">编译windows平台exe</a></h3>
<blockquote>
<pre><code>rustup target add x86_64-pc-windows-gnu
apt install mingw-w64
cargo new win #创建一个新项目[可选]
#cd 项目目录或用户目录再写配置文件
[target.x86_64-pc-windows-gnu]
linker = &quot;x86_64-w64-mingw32-gcc&quot;
ar = &quot;x86_64-w64-mingw32-gcc-ar&quot;
#编译：
cargo build --release --target x86_64-pc-windows-gnu
</code></pre>
</blockquote>
<h3 id="拓展安装桌面环境自选仅列示例"><a class="header" href="#拓展安装桌面环境自选仅列示例">拓展：安装桌面环境(自选，仅列示例)</a></h3>
<blockquote>
<pre><code>apt install xfce4 tigervnc-common tigervnc-standalone-server dbus-x11 #最后一个报错时选装
vncserver
#输入两遍不少于6位密码
vncserver -kill :1 #关闭1号vnc服务
</code></pre>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ax-Index</title>
    <link rel="stylesheet" type="text/css" href="css/appUI.css">
    <style>
        @keyframes draw-path {
            80% {
                opacity: 0.8;
            }
            to {
                stroke-dashoffset: 0;
                opacity: 0;
            }
        }

        .H {
            stroke-dasharray: 540px;
            stroke-dashoffset: 540px;
            animation: draw-path 2s ease-out forwards;
            animation-iteration-count: infinite;
        }

        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #46af4b;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease-in-out;
        }
    </style>
</head>
<body
    style="overflow: hidden;
    background-color: --var(--bg);
    -webkit-user-select:none;
    user-select:none;">

    <div id="loader" class="active">
        <svg width="300" height="300" viewBox="0 0 300 300" fill="none">
            <defs>
                <filter id="glow">
                <feGaussianBlur stdDeviation="3" result="blurred"/>
                <feMerge>
                    <feMergeNode in="blurred"/>
                    <feMergeNode in="SourceGraphic"/>
                </feMerge>
                </filter>
            </defs>
            <g>
                <animateTransform
                    attributeName="transform"
                    type="rotate"
                    from="0 150 150"
                    to="360 150 150"
                    dur="10s"
                    repeatCount="indefinite"/>
            </g>

            <g transform="translate(85,90)scale(0.8,0.8)">
                <path class="H" stroke="white" stroke-width="10" stroke-linecap="square" stroke-linejoin="bevel" filter="url(#glow)"
                    d="M34.5 17.5s-4.5-3-3-3c25 11.5 40 121-5.5 121-6.5 0-11.5-2.5-14.5-6.5-32-53.3 109.2-69.2 128-82.5 20-10.7 17.3-41.334-8-40-36 8-18.7 65.3-13.3 90.7 2.7 10.7 6.7 21.334 11.333 32 1.2 2.6 5 12 4 9.5"
                />
            </g>
        </svg>
    </div>
    <!-- <div id="shadowCover"></div> -->

    <div class="overlay" id="overlay">
        <div class="modal" id="modal">
            <button class="close-btn" onclick="closeModal()"></button>
            <div class="modal-content">
                <h2>You Find The Modal!!!</h2>
                <p>Alright, it's useless</p>
                <div class="button-container">
                    <button class="confirm-btn" onclick="closeModal()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div id="tooltip">
        <div class="message-container"></div>
        <div class="task-queue"></div>
    </div>
    
    <main class="content">

        <iframe
            id = "homePage"
            class = "pages"
            src = "homePage.html">
        </iframe>

        <iframe
            id = "settingPage"
            class = "pages covert"
            src = "settingPage.html">
        </iframe>

        <iframe
            id = "blogPage"
            class = "pages covert"
            src = "apps/blog/index.html">
        </iframe>

    </main>
    
    <aside class="sidebar">
        <div class="menuContainer">
            <section onclick="changeMenu('homePage')" id="menu-homePage" class="icon active"><svg xmlns="http://www.w3.org/2000/svg" width="768" height="768" viewBox="0 0 576 576"><path d="M273.6 73.86s-148.464 120-216 197.568c-4.872 4.8-9.6 10.848-9.6 19.2 0 14.4 9.6 24 24 24h48v168c0 14.4 9.6 24 24 24h72c14.4 0 24-9.6 24-24v-96h96v96c0 13.248 9.6 24 24 24h72c14.4 0 24-9.6 24-24v-168h48c14.4 0 24-9.6 24-24 0-7.584-3.696-12-9.192-19.2C434.4 193.86 297.6 73.86 297.6 73.86c-8.712-5.928-15.552-6.024-24 0"/></svg></section>
            <section onclick="changeMenu('settingPage')" id="menu-settingPage" class="icon"><svg width="800" height="800" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M43 56.44H21a6 6 0 0 1-4.8-2.75L5.37 34.75a6 6 0 0 1 0-6L16.3 10.31a6 6 0 0 1 4.8-2.75h21.86a6 6 0 0 1 4.8 2.75l11 18.94a6 6 0 0 1 0 6L47.7 53.69a6 6 0 0 1-4.8 2.75M21 10.56a3 3 0 0 0-2 1.25L8 30.75a2.5 2.5 0 0 0 0 2.5l11 18.94a3 3 0 0 0 2 1.25h21.86a3 3 0 0 0 2-1.25L56 33.25a2.5 2.5 0 0 0 0-2.5L45 11.81a3 3 0 0 0-2-1.25Z" stroke-width="3"/><path d="M32 42a10 10 0 1 1 10-10 10 10 0 0 1-10 10m0-17.14A7 7 0 1 0 39 32a7 7 0 0 0-7-7" stroke-width="3"/></svg></section>
            <section onclick="changeMenu('blogPage')" id="menu-blogPage" class="icon"><svg height="800" width="800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" xml:space="preserve"><path d="M5 23c-2.2 0-4-1.8-4-4v-8h2v4.5c.6-.3 1.3-.5 2-.5 2.2 0 4 1.8 4 4s-1.8 4-4 4m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m19 2h-2C22 9.6 14.4 2 5 2V0c10.5 0 19 8.5 19 19m-5 0h-2c0-6.6-5.4-12-12-12V5c7.7 0 14 6.3 14 14m-5 0h-2c0-3.9-3.1-7-7-7v-2c5 0 9 4 9 9"/></svg></section>
        </div>
    </aside>
    <label class="sidebar-toggle-btn">
        <input onclick="display_menu()" type="checkbox" hidden>
        <span class="icon-arrow"></span>
    </label>

    <script src="js/config.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/language.js"></script>
    <script src="js/index.js"></script>
    <script>

        // init cartoon
        function initLoader() {
            const svgNS = 'http://www.w3.org/2000/svg';
            const loader = document.getElementById('loader');
            const svg = document.querySelector('#loader svg');
            const g = svg.querySelector('g');
            
            // create lines
            const createLines = () => {
                const numLines = 60;
                const cx = 150;
                const cy = 150;
                const radius = 130;

                for (let i = 0; i < numLines; i++) {
                    const angle = (i / numLines) * 2 * Math.PI;
                    const x1 = cx + radius * Math.cos(angle);
                    const y1 = cy + radius * Math.sin(angle);
                    const x2 = cx + (radius - 15) * Math.cos(angle);
                    const y2 = cy + (radius - 15) * Math.sin(angle);

                    const line = document.createElementNS(svgNS, 'line');
                    line.setAttribute('x1', x1);
                    line.setAttribute('y1', y1);
                    line.setAttribute('x2', x2);
                    line.setAttribute('y2', y2);
                    line.setAttribute('stroke', 'rgba(255, 255, 255, 0.5)');
                    line.setAttribute('stroke-width', '3');
                    
                    g.appendChild(line);
                }
            };

            createLines();
        }

        // end
        function hideLoader() {
            const loader = document.getElementById('loader');
            loader.style.opacity = '0';
            
            setTimeout(() => {
                loader.style.display = 'none';
            }, 1000);
        }

        // start
        document.addEventListener('DOMContentLoaded', function() {
            initLoader();
            
            if (localStorage.last_Id) {
                if (document.getElementById(localStorage.last_Id)) {
                    changeMenu(localStorage.last_Id);
                }
            }
            // if (localStorage.language && localStorage.language !== app_Info['app_Language']) {
            //     config['language'] = localStorage.language;
            //     broadcast_Iframe_Info(['lan', config['language']]);
            // } else if (app_Info['app_Language'] && app_Info['app_Language'] !== config['language']) {
            //     broadcast_Iframe_Info(['lan', config['language']]);
            // }

            window.addEventListener('load', function() {
                
                hideLoader();
            });
        });
    </script>
</body>
</html>
